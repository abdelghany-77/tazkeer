// Islamic Adhkar Data
const adhkarData = {
  morning: {
    title: "أذكار الصباح",
    description: "أذكار الصباح من الكتاب والسنة",
    icon: "fas fa-sun",
    adhkar: [
      {
        text: "أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ الرَّجِيمِ ﴿اللَّهُ لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ وَلَا يَئُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ﴾",
        source: "آية الكرسي - البقرة: 255",
        fadl: "من قرأها في الصباح أُجير من الجن حتى المساء، وهي أعظم آية في القرآن، وفيها اسم الله الأعظم. من قالها حين يصبح كان في ذمة الله حتى يمسي.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ هُوَ اللَّهُ أَحَدٌ * اللَّهُ الصَّمَدُ * لَمْ يَلِدْ وَلَمْ يُولَدْ * وَلَمْ يَكُنْ لَهُ كُفُوًا أَحَدٌ﴾",
        source: "سورة الإخلاص",
        fadl: "تعدل ثلث القرآن، من قرأها ثلاث مرات في الصباح أُعطي أجر قراءة القرآن كاملاً، وهي حصن منيع من كل سوء.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ * مِنْ شَرِّ مَا خَلَقَ * وَمِنْ شَرِّ غَاسِقٍ إِذَا وَقَبَ * وَمِنْ شَرِّ النَّفَّاثَاتِ فِي الْعُقَدِ * وَمِنْ شَرِّ حَاسِدٍ إِذَا حَسَدَ﴾",
        source: "سورة الفلق",
        fadl: "من المعوذات التي تحمي من كل سوء، من قرأها في الصباح حُفظ من السحر والحسد والشرور حتى المساء. وهي حصن الله المنيع.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ أَعُوذُ بِرَبِّ النَّاسِ * مَلِكِ النَّاسِ * إِلَهِ النَّاسِ * مِنْ شَرِّ الْوَسْوَاسِ الْخَنَّاسِ * الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ * مِنَ الْجِنَّةِ وَالنَّاسِ﴾",
        source: "سورة الناس",
        fadl: "تحمي من وساوس الشيطان وشرور الإنس والجن، من قرأها في الصباح طُردت عنه الوساوس وحُفظ من شر النفوس الخبيثة.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، رَبِّ أَسْأَلُكَ خَيْرَ مَا فِي هَذَا الْيَوْمِ وَخَيْرَ مَا بَعْدَهُ، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِي هَذَا الْيَوْمِ وَشَرِّ مَا بَعْدَهُ، رَبِّ أَعُوذُ بِكَ مِنَ الْكَسَلِ وَسُوءِ الْكِبَرِ، رَبِّ أَعُوذُ بِكَ مِنْ عَذَابٍ فِي النَّارِ وَعَذَابٍ فِي الْقَبْرِ",
        source: "صحيح مسلم",
        fadl: "من سيد الاستغفار، من قاله في الصباح بيقين وإيمان ومات في ذلك اليوم دخل الجنة، وهو اعتراف بتوحيد الله وطلب الخير والحماية من الشر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ النُّشُورُ",
        source: "الترمذي",
        fadl: "دعاء شامل بأن الله هو مصدر الحياة والموت والبعث، من قاله أقر بتوحيد الله في ربوبيته وألوهيته وأسمائه وصفاته.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَصْبَحْنَا عَلَى فِطْرَةِ الْإِسْلَامِ، وَعَلَى كَلِمَةِ الْإِخْلَاصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ، وَعَلَى مِلَّةِ أَبِينَا إِبْرَاهِيمَ حَنِيفًا مُسْلِمًا وَمَا كَانَ مِنَ الْمُشْرِكِينَ",
        source: "أحمد",
        fadl: "تجديد العهد مع الله على الإسلام والتوحيد، واتباع النبي محمد وملة إبراهيم، وهو حماية من الانحراف والضلال.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ",
        source: "البخاري ومسلم",
        fadl: "من قالها مائة مرة غُفرت ذنوبه وإن كانت مثل زبد البحر، وهي أحب الكلام إلى الله وأثقلها في الميزان.",
        count: 100,
        currentCount: 0,
      },
      {
        text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ",
        source: "البخاري ومسلم",
        fadl: "من قالها عشر مرات كُتب له بها مائة حسنة، ومُحي عنه بها مائة سيئة، وكانت له حرزاً من الشيطان يومه ذلك حتى يمسي.",
        count: 10,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ لَكَ بِذَنْبِي فَاغْفِرْ لِي فَإِنَّهُ لَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ",
        source: "البخاري",
        fadl: "سيد الاستغفار، من قاله حين يصبح موقناً به فمات من يومه دخل الجنة، وهو اعتراف بالعبودية والذنب وطلب المغفرة من الله وحده.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "رَضِيتُ بِاللَّهِ رَبًّا، وَبِالْإِسْلَامِ دِينًا، وَبِمُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ نَبِيًّا",
        source: "أبو داود",
        fadl: "من قالها ثلاث مرات حين يصبح وحين يمسي كان حقاً على الله أن يُرضيه يوم القيامة، وهي إقرار بالرضا بأركان الإيمان.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَصْبَحْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ",
        source: "أبو داود",
        fadl: "من قالها أعتقه الله من النار، وهي شهادة عظيمة أمام الله وملائكته وجميع خلقه بالتوحيد والرسالة.",
        count: 4,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ مَا أَصْبَحَ بِي مِنْ نِعْمَةٍ أَوْ بِأَحَدٍ مِنْ خَلْقِكَ، فَمِنْكَ وَحْدَكَ لَا شَرِيكَ لَكَ، فَلَكَ الْحَمْدُ وَلَكَ الشُّكْرُ",
        source: "أبو داود",
        fadl: "من قالها حين يصبح أدى شكر يومه، وهي اعتراف بأن جميع النعم من الله وحده لا شريك له.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ",
        source: "أبو داود",
        fadl: "من قالها سبع مرات كفاه الله ما أهمه من أمر الدنيا والآخرة، وهي آية التوكل والاعتماد على الله وحده.",
        count: 7,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الَّذِي لَا يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الْأَرْضِ وَلَا فِي السَّمَاءِ وَهُوَ السَّمِيعُ الْعَلِيمُ",
        source: "أبو داود والترمذي",
        fadl: "من قالها ثلاث مرات حين يصبح وحين يمسي لم يضره شيء، وهي حماية شاملة من جميع الأضرار والشرور.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ، وَمِدَادَ كَلِمَاتِهِ",
        source: "صحيح مسلم",
        fadl: "تسبيح عظيم بعدد خلق الله ورضا نفسه وزنة عرشه، أجره عظيم لا يُحصى، وهو من أفضل أنواع الذكر.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْكُفْرِ وَالْفَقْرِ، وَأَعُوذُ بِكَ مِنْ عَذَابِ الْقَبْرِ، لَا إِلَهَ إِلَّا أَنْتَ",
        source: "أبو داود",
        fadl: "استعاذة من أعظم المصائب: الكفر والفقر وعذاب القبر، وهي حماية شاملة من أخطر ما يصيب العبد.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَافِيَةَ فِي الدُّنْيَا وَالْآخِرَةِ، اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَفْوَ وَالْعَافِيَةَ فِي دِينِي وَدُنْيَايَ وَأَهْلِي وَمَالِي، اللَّهُمَّ اسْتُرْ عَوْرَاتِي وَآمِنْ رَوْعَاتِي، اللَّهُمَّ احْفَظْنِي مِنْ بَيْنِ يَدَيَّ وَمِنْ خَلْفِي وَعَنْ يَمِينِي وَعَنْ شِمَالِي، وَمِنْ فَوْقِي، وَأَعُوذُ بِعَظَمَتِكَ أَنْ أُغْتَالَ مِنْ تَحْتِي",
        source: "أبو داود وابن ماجه",
        fadl: "دعاء شامل للعافية والحفظ من جميع الجهات، من أعظم الأدعية الجامعة للخير والحماية من الشر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "يَا حَيُّ يَا قَيُّومُ بِرَحْمَتِكَ أَسْتَغِيثُ، أَصْلِحْ لِي شَأْنِي كُلَّهُ، وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ",
        source: "النسائي في الكبرى",
        fadl: "دعاء الاستغاثة بالحي القيوم، من أعظم أسماء الله، ومن دعا به أُصلح شأنه كله ولم يُوكل إلى نفسه لحظة واحدة.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ رَبِّ الْعَالَمِينَ، اللَّهُمَّ إِنِّي أَسْأَلُكَ خَيْرَ هَذَا الْيَوْمِ، فَتْحَهُ، وَنَصْرَهُ، وَنُورَهُ، وَبَرَكَتَهُ، وَهُدَاهُ، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِيهِ وَشَرِّ مَا بَعْدَهُ",
        source: "أبو داود",
        fadl: "دعاء شامل لطلب خير اليوم وبركته ونوره والاستعاذة من شره، وهو من الأدعية الجامعة للخير.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّمَاوَاتِ وَالْأَرْضِ رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ، وَأَنْ أَقْتَرِفَ عَلَى نَفْسِي سُوءًا أَوْ أَجُرَّهُ إِلَى مُسْلِمٍ",
        source: "أبو داود والترمذي",
        fadl: "استعاذة شاملة من شر النفس والشيطان، وهي حماية من الوقوع في المعاصي وإيذاء المسلمين.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ",
        source: "صحيح مسلم",
        fadl: "من أعظم الأدعية للحماية من كل شر، من قالها لم يضره شيء حتى يرتحل من منزله، وهي حصن من كل سوء.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ عَلَى نَبِيِّنَا مُحَمَّدٍ",
        source: "البخاري ومسلم",
        fadl: "من صلى على النبي حين يصبح وحين يمسي أدركته شفاعته يوم القيامة، وصلى الله عليه بها عشراً.",
        count: 10,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنَّا نَعُوذُ بِكَ مِنْ أَنْ نُشْرِكَ بِكَ شَيْئًا نَعْلَمُهُ، وَنَسْتَغْفِرُكَ لِمَا لَا نَعْلَمُهُ",
        source: "أحمد",
        fadl: "استعاذة من الشرك الظاهر والخفي، واستغفار مما قد يخفى على العبد من أنواع الشرك، وهي تطهير شامل للقلب.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْهَمِّ وَالْحَزَنِ، وَأَعُوذُ بِكَ مِنَ الْعَجْزِ وَالْكَسَلِ، وَأَعُوذُ بِكَ مِنَ الْجُبْنِ وَالْبُخْلِ، وَأَعُوذُ بِكَ مِنْ غَلَبَةِ الدَّيْنِ، وَقَهْرِ الرِّجَالِ",
        source: "البخاري ومسلم",
        fadl: "استعاذة جامعة من آفات القلب والنفس والحال، وهي حماية من أهم ما يضر بالعبد في دينه ودنياه.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَسْتَغْفِرُ اللَّهَ الْعَظِيمَ الَّذِي لَا إِلَهَ إِلَّا هُوَ، الْحَيُّ الْقَيُّومُ، وَأَتُوبُ إِلَيْهِ",
        source: "أبو داود والترمذي",
        fadl: "من أعظم صيغ الاستغفار، تتضمن توحيد الله وذكر أسمائه الحسنى، ومن قالها غُفر له وإن كان فر من الزحف.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "يَا رَبِّ، لَكَ الْحَمْدُ كَمَا يَنْبَغِي لِجَلَالِ وَجْهِكَ، وَلِعَظِيمِ سُلْطَانِكَ",
        source: "أحمد وابن ماجه",
        fadl: "حمد عظيم يليق بجلال الله وعظمته، وهو من أفضل أنواع الحمد والثناء على الله تعالى.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ عِلْمًا نَافِعًا، وَرِزْقًا طَيِّبًا، وَعَمَلًا مُتَقَبَّلًا",
        source: "ابن ماجه",
        fadl: "دعاء جامع لأهم ما يحتاجه المسلم: العلم النافع والرزق الطيب والعمل المتقبل، وهي أسس السعادة في الدنيا والآخرة.",
        count: 1,
        currentCount: 0,
      },
    ],
  },
  evening: {
    title: "أذكار المساء",
    description: "أذكار المساء من الكتاب والسنة",
    icon: "fas fa-moon",
    adhkar: [
      {
        text: "أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ الرَّجِيمِ ﴿اللَّهُ لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ وَلَا يَئُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ﴾",
        source: "آية الكرسي - البقرة: 255",
        fadl: "من قرأها في المساء أُجير من الجن حتى الصباح، وهي أعظم آية في القرآن، تحفظ من كل سوء وشر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، رَبِّ أَسْأَلُكَ خَيْرَ مَا فِي هَذِهِ اللَّيْلَةِ وَخَيْرَ مَا بَعْدَهَا، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِي هَذِهِ اللَّيْلَةِ وَشَرِّ مَا بَعْدَهَا، رَبِّ أَعُوذُ بِكَ مِنَ الْكَسَلِ وَسُوءِ الْكِبَرِ، رَبِّ أَعُوذُ بِكَ مِنْ عَذَابٍ فِي النَّارِ وَعَذَابٍ فِي الْقَبْرِ",
        source: "صحيح مسلم",
        fadl: "دعاء شامل بالتوحيد وطلب خير الليل والحماية من الشرور، من قاله بيقين حُفظ من المكاره وبُورك له في ليلته.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ بِكَ أَمْسَيْنَا، وَبِكَ أَصْبَحْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ الْمَصِيرُ",
        source: "الترمذي",
        fadl: "إقرار بأن الله هو مصدر الحياة والموت والمرجع، يُكسب القلب الطمأنينة واليقين في الله عز وجل.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَمْسَيْنَا عَلَى فِطْرَةِ الْإِسْلَامِ، وَعَلَى كَلِمَةِ الْإِخْلَاصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ، وَعَلَى مِلَّةِ أَبِينَا إِبْرَاهِيمَ حَنِيفًا مُسْلِمًا وَمَا كَانَ مِنَ الْمُشْرِكِينَ",
        source: "أحمد",
        fadl: "تجديد العهد مع الله على الإسلام في المساء، حماية من الفتن والانحراف، وتثبيت على دين الحق.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ لَكَ بِذَنْبِي فَاغْفِرْ لِي فَإِنَّهُ لَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ",
        source: "البخاري",
        fadl: "سيد الاستغفار، من قاله حين يمسي موقناً به فمات من ليلته دخل الجنة، وهو أعظم صيغ التوبة والاستغفار.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ عَافِنِي فِي بَدَنِي، اللَّهُمَّ عَافِنِي فِي سَمْعِي، اللَّهُمَّ عَافِنِي فِي بَصَرِي، لَا إِلَهَ إِلَّا أَنْتَ",
        source: "أبو داود",
        fadl: "دعاء بالعافية في البدن والحواس، من داوم عليه حُفظت له صحته وعوفي من البلايا والأمراض.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْكُفْرِ وَالْفَقْرِ، وَأَعُوذُ بِكَ مِنْ عَذَابِ الْقَبْرِ، لَا إِلَهَ إِلَّا أَنْتَ",
        source: "أبو داود",
        fadl: "استعاذة من أعظم المصائب: الكفر والفقر وعذاب القبر، وهي حماية شاملة من أخطر ما يصيب العبد.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "آمَنَ الرَّسُولُ بِمَا أُنزِلَ إِلَيْهِ مِن رَّبِّهِ وَالْمُؤْمِنُونَ ۚ كُلٌّ آمَنَ بِاللَّهِ وَمَلَائِكَتِهِ وَكُتُبِهِ وَرُسُلِهِ لَا نُفَرِّقُ بَيْنَ أَحَدٍ مِّن رُّسُلِهِ ۚ وَقَالُوا سَمِعْنَا وَأَطَعْنَا ۖ غُفْرَانَكَ رَبَّنَا وَإِلَيْكَ الْمَصِيرُ * لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا ۚ لَهَا مَا كَسَبَتْ وَعَلَيْهَا مَا اكْتَسَبَتْ ۗ رَبَّنَا لَا تُؤَاخِذْنَا إِن نَّسِينَا أَوْ أَخْطَأْنَا ۚ رَبَّنَا وَلَا تَحْمِلْ عَلَيْنَا إِصْرًا كَمَا حَمَلْتَهُ عَلَى الَّذِينَ مِن قَبْلِنَا ۚ رَبَّنَا وَلَا تُحَمِّلْنَا مَا لَا طَاقَةَ لَنَا بِهِ ۖ وَاعْفُ عَنَّا وَاغْفِرْ لَنَا وَارْحَمْنَا ۚ أَنتَ مَوْلَانَا فَانصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ",
        source: "البقرة: 285-286",
        fadl: "آيتان من آخر سورة البقرة، من قرأهما في ليلة كفتاه، وفيهما إيمان شامل وأدعية عظيمة بالمغفرة والعفو والرحمة والنصر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ هُوَ اللَّهُ أَحَدٌ * اللَّهُ الصَّمَدُ * لَمْ يَلِدْ وَلَمْ يُولَدْ * وَلَمْ يَكُنْ لَهُ كُفُوًا أَحَدٌ﴾",
        source: "سورة الإخلاص",
        fadl: "تعدل ثلث القرآن، من قرأها ثلاث مرات في المساء أُعطي أجر قراءة القرآن كاملاً، وهي حصن منيع من كل سوء.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ * مِنْ شَرِّ مَا خَلَقَ * وَمِنْ شَرِّ غَاسِقٍ إِذَا وَقَبَ * وَمِنْ شَرِّ النَّفَّاثَاتِ فِي الْعُقَدِ * وَمِنْ شَرِّ حَاسِدٍ إِذَا حَسَدَ﴾",
        source: "سورة الفلق",
        fadl: "من المعوذات التي تحمي من كل سوء، من قرأها في المساء حُفظ من السحر والحسد والشرور حتى الصباح. وهي حصن الله المنيع.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ أَعُوذُ بِرَبِّ النَّاسِ * مَلِكِ النَّاسِ * إِلَهِ النَّاسِ * مِنْ شَرِّ الْوَسْوَاسِ الْخَنَّاسِ * الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ * مِنَ الْجِنَّةِ وَالنَّاسِ﴾",
        source: "سورة الناس",
        fadl: "تحمي من وساوس الشيطان وشرور الإنس والجن، من قرأها في المساء طُردت عنه الوساوس وحُفظ من شر النفوس الخبيثة.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "رَضِيتُ بِاللَّهِ رَبًّا، وَبِالْإِسْلَامِ دِينًا، وَبِمُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ نَبِيًّا",
        source: "أبو داود",
        fadl: "من قالها ثلاث مرات حين يصبح وحين يمسي كان حقاً على الله أن يُرضيه يوم القيامة، وهي إقرار بالرضا بأركان الإيمان.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَمْسَيْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ",
        source: "أبو داود",
        fadl: "من قالها أعتقه الله من النار، وهي شهادة عظيمة أمام الله وملائكته وجميع خلقه بالتوحيد والرسالة.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ مَا أَمْسَى بِي مِنْ نِعْمَةٍ أَوْ بِأَحَدٍ مِنْ خَلْقِكَ، فَمِنْكَ وَحْدَكَ لَا شَرِيكَ لَكَ، فَلَكَ الْحَمْدُ وَلَكَ الشُّكْرُ",
        source: "أبو داود",
        fadl: "من قالها حين يمسي أدى شكر يومه، وهي اعتراف بأن جميع النعم من الله وحده لا شريك له.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ",
        source: "أبو داود",
        fadl: "من قالها سبع مرات كفاه الله ما أهمه من أمر الدنيا والآخرة، وهي آية التوكل والاعتماد على الله وحده.",
        count: 7,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الَّذِي لَا يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الْأَرْضِ وَلَا فِي السَّمَاءِ وَهُوَ السَّمِيعُ الْعَلِيمُ",
        source: "أبو داود والترمذي",
        fadl: "من قالها ثلاث مرات حين يصبح وحين يمسي لم يضره شيء، وهي حماية شاملة من جميع الأضرار والشرور.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ، وَمِدَادَ كَلِمَاتِهِ",
        source: "صحيح مسلم",
        fadl: "تسبيح عظيم بعدد خلق الله ورضا نفسه وزنة عرشه، أجره عظيم لا يُحصى، وهو من أفضل أنواع الذكر.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "يَا حَيُّ يَا قَيُّومُ بِرَحْمَتِكَ أَسْتَغِيثُ، أَصْلِحْ لِي شَأْنِي كُلَّهُ، وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ",
        source: "النسائي في الكبرى",
        fadl: "دعاء الاستغاثة بالحي القيوم، من أعظم أسماء الله، ومن دعا به أُصلح شأنه كله ولم يُوكل إلى نفسه لحظة واحدة.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ رَبِّ الْعَالَمِينَ، اللَّهُمَّ إِنِّي أَسْأَلُكَ خَيْرَ هَذِهِ اللَّيْلَةِ، فَتْحَهَا، وَنَصْرَهَا، وَنُورَهَا، وَبَرَكَتَهَا، وَهُدَاهَا، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِيهَا وَشَرِّ مَا بَعْدَهَا",
        source: "أبو داود",
        fadl: "دعاء شامل لطلب خير الليلة وبركتها ونورها والاستعاذة من شرها، وهو من الأدعية الجامعة للخير.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّمَاوَاتِ وَالْأَرْضِ رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ، وَأَنْ أَقْتَرِفَ عَلَى نَفْسِي سُوءًا أَوْ أَجُرَّهُ إِلَى مُسْلِمٍ",
        source: "أبو داود والترمذي",
        fadl: "استعاذة شاملة من شر النفس والشيطان، وهي حماية من الوقوع في المعاصي وإيذاء المسلمين.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ",
        source: "صحيح مسلم",
        fadl: "من أعظم الأدعية للحماية من كل شر، من قالها لم يضره شيء حتى يصبح، وهي حصن من كل سوء.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ عَلَى نَبِيِّنَا مُحَمَّدٍ",
        source: "البخاري ومسلم",
        fadl: "من صلى على النبي حين يصبح وحين يمسي أدركته شفاعته يوم القيامة، وصلى الله عليه بها عشراً.",
        count: 10,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنَّا نَعُوذُ بِكَ مِنْ أَنْ نُشْرِكَ بِكَ شَيْئًا نَعْلَمُهُ، وَنَسْتَغْفِرُكَ لِمَا لَا نَعْلَمُهُ",
        source: "أحمد",
        fadl: "استعاذة من الشرك الظاهر والخفي، واستغفار مما قد يخفى على العبد من أنواع الشرك، وهي تطهير شامل للقلب.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْهَمِّ وَالْحَزَنِ، وَأَعُوذُ بِكَ مِنَ الْعَجْزِ وَالْكَسَلِ، وَأَعُوذُ بِكَ مِنَ الْجُبْنِ وَالْبُخْلِ، وَأَعُوذُ بِكَ مِنْ غَلَبَةِ الدَّيْنِ، وَقَهْرِ الرِّجَالِ",
        source: "البخاري ومسلم",
        fadl: "استعاذة جامعة من آفات القلب والنفس والحال، وهي حماية من أهم ما يضر بالعبد في دينه ودنياه.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَسْتَغْفِرُ اللَّهَ الْعَظِيمَ الَّذِي لَا إِلَهَ إِلَّا هُوَ، الْحَيُّ الْقَيُّومُ، وَأَتُوبُ إِلَيْهِ",
        source: "أبو داود والترمذي",
        fadl: "من أعظم صيغ الاستغفار، تتضمن توحيد الله وذكر أسمائه الحسنى، ومن قالها غُفر له وإن كان فر من الزحف.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "يَا رَبِّ، لَكَ الْحَمْدُ كَمَا يَنْبَغِي لِجَلَالِ وَجْهِكَ، وَلِعَظِيمِ سُلْطَانِكَ",
        source: "أحمد وابن ماجه",
        fadl: "حمد عظيم يليق بجلال الله وعظمته، وهو من أفضل أنواع الحمد والثناء على الله تعالى.",
        count: 1,
        currentCount: 0,
      },
    ],
  },
  prayer: {
    title: "أذكار بعد الصلاة",
    description: "أذكار مستجابة بعد الصلوات المفروضة",
    icon: "fas fa-praying-hands",
    adhkar: [
      {
        text: "أَسْتَغْفِرُ اللَّهَ",
        source: "صحيح مسلم",
        fadl: "من السنن المؤكدة بعد الصلاة، يمحو الله به الذنوب والخطايا، وهو أول ما يُسن قوله بعد التسليم من الصلاة.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَنْتَ السَّلَامُ وَمِنْكَ السَّلَامُ تَبَارَكْتَ ذَا الْجَلَالِ وَالْإِكْرَامِ",
        source: "صحيح مسلم",
        fadl: "ثناء على الله بأسمائه الحسنى، يُستحب قوله بعد كل صلاة، وفيه إقرار بسلامة الله من كل نقص وعيب.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، اللَّهُمَّ لَا مَانِعَ لِمَا أَعْطَيْتَ، وَلَا مُعْطِيَ لِمَا مَنَعْتَ، وَلَا يَنْفَعُ ذَا الْجَدِّ مِنْكَ الْجَدُّ",
        source: "البخاري ومسلم",
        fadl: "توحيد الله وإقرار بأنه المتصرف الوحيد في الكون، من قاله بعد كل صلاة غُفرت ذنوبه وإن كانت مثل زبد البحر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "سُبْحَانَ اللَّهِ",
        source: "البخاري ومسلم",
        fadl: "تسبيح الله وتنزيهه عن كل نقص، من سبح الله 33 مرة بعد كل صلاة فذلك 99 تسبيحة يومياً، وهي من أحب الأعمال إلى الله.",
        fadl: "تسبيح الله وتنزيهه عن كل نقص، من سبح الله 33 مرة بعد كل صلاة فذلك 99 تسبيحة يومياً، وهي من أحب الأعمال إلى الله.",
        count: 33,
        currentCount: 0,
      },
      {
        text: "الْحَمْدُ لِلَّهِ",
        source: "البخاري ومسلم",
        fadl: "حمد الله وشكره على نعمه، من حمد الله 33 مرة بعد كل صلاة كان من الذاكرين الله كثيراً، وهو أثقل في الميزان من الجبال.",
        count: 33,
        currentCount: 0,
      },
      {
        text: "اللَّهُ أَكْبَرُ",
        source: "البخاري ومسلم",
        fadl: "تكبير الله وإقرار بعظمته، من كبر الله 34 مرة بعد كل صلاة مع التسبيح والحمد، فتلك 100 ذكر، وهي أحب إلى الله من الدنيا وما فيها.",
        count: 34,
        currentCount: 0,
      },
      {
        text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ",
        source: "صحيح مسلم",
        fadl: "من قاله بعد كل صلاة فريضة لم يمنعه من دخول الجنة إلا أن يموت، وهو أعظم كلمة في التوحيد.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَعِنِّي عَلَى ذِكْرِكَ وَشُكْرِكَ وَحُسْنِ عِبَادَتِكَ",
        source: "أبو داود والنسائي",
        fadl: "دعاء جامع لطلب التوفيق في الذكر والشكر وحسن العبادة، من داوم عليه أعانه الله على طاعته ووفقه للخير.",
        count: 1,
        currentCount: 0,
      },
    ],
  },
  sleep: {
    title: "أذكار النوم",
    description: "أذكار ما قبل النوم من السنة النبوية",
    icon: "fas fa-bed",
    adhkar: [
      {
        text: "بِاسْمِكَ رَبِّي وَضَعْتُ جَنْبِي، وَبِكَ أَرْفَعُهُ، فَإِنْ أَمْسَكْتَ نَفْسِي فَارْحَمْهَا، وَإِنْ أَرْسَلْتَهَا فَاحْفَظْهَا بِمَا تَحْفَظُ بِهِ عِبَادَكَ الصَّالِحِينَ",
        source: "البخاري ومسلم",
        fadl: "دعاء النوم العظيم، من قاله عند منامه فمات في ليلته مات على الفطرة، وفيه تسليم الأمر لله في الحياة والموت.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ خَلَقْتَ نَفْسِي وَأَنْتَ تَوَفَّاهَا، لَكَ مَمَاتُهَا وَمَحْيَاهَا، إِنْ أَحْيَيْتَهَا فَاحْفَظْهَا، وَإِنْ أَمَتَّهَا فَاغْفِرْ لَهَا، اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَافِيَةَ",
        source: "صحيح مسلم",
        fadl: "دعاء جامع للحفظ والمغفرة والعافية، يُقال عند النوم، وفيه إقرار بأن الله هو المحيي المميت وهو الحافظ الغفار.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ قِنِي عَذَابَكَ يَوْمَ تَبْعَثُ عِبَادَكَ",
        source: "أبو داود والترمذي",
        fadl: "استعاذة من عذاب القبر وعذاب يوم البعث، من قاله ثلاثاً عند النوم أُجير من عذاب القبر بإذن الله.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "سُبْحَانَ اللَّهِ",
        source: "البخاري ومسلم",
        fadl: "التسبيح عند النوم يطرد الشياطين ويجلب السكينة، ومن سبح الله 33 مرة قبل نومه خفف الله عنه تعب النهار.",
        count: 33,
        currentCount: 0,
      },
      {
        text: "الْحَمْدُ لِلَّهِ",
        source: "البخاري ومسلم",
        fadl: "حمد الله قبل النوم شكر على نعم اليوم، ومن حمد الله 33 مرة قبل منامه بُورك له في نومه وراحته.",
        count: 33,
        currentCount: 0,
      },
      {
        text: "اللَّهُ أَكْبَرُ",
        source: "البخاري ومسلم",
        fadl: "التكبير قبل النوم يُذكر بعظمة الله، ومن كبر الله 34 مرة مع التسبيح والحمد فقد أتى بمائة ذكر قبل النوم.",
        count: 34,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَسْلَمْتُ نَفْسِي إِلَيْكَ، وَوَجَّهْتُ وَجْهِي إِلَيْكَ، وَفَوَّضْتُ أَمْرِي إِلَيْكَ، وَأَلْجَأْتُ ظَهْرِي إِلَيْكَ، رَغْبَةً وَرَهْبَةً إِلَيْكَ، لَا مَلْجَأَ وَلَا مَنْجَا مِنْكَ إِلَّا إِلَيْكَ، آمَنْتُ بِكِتَابِكَ الَّذِي أَنْزَلْتَ، وَبِنَبِيِّكَ الَّذِي أَرْسَلْتَ",
        source: "البخاري ومسلم",
        fadl: "من خير أدعية النوم، من قاله ومات في ليلته مات على الفطرة، وفيه توكل كامل على الله وإيمان بالكتاب والرسول.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "آمَنَ الرَّسُولُ بِمَا أُنزِلَ إِلَيْهِ مِن رَّبِّهِ وَالْمُؤْمِنُونَ ۚ كُلٌّ آمَنَ بِاللَّهِ وَمَلَائِكَتِهِ وَكُتُبِهِ وَرُسُلِهِ لَا نُفَرِّقُ بَيْنَ أَحَدٍ مِّن رُّسُلِهِ ۚ وَقَالُوا سَمِعْنَا وَأَطَعْنَا ۖ غُفْرَانَكَ رَبَّنَا وَإِلَيْكَ الْمَصِيرُ * لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا ۚ لَهَا مَا كَسَبَتْ وَعَلَيْهَا مَا اكْتَسَبَتْ ۗ رَبَّنَا لَا تُؤَاخِذْنَا إِن نَّسِينَا أَوْ أَخْطَأْنَا ۚ رَبَّنَا وَلَا تَحْمِلْ عَلَيْنَا إِصْرًا كَمَا حَمَلْتَهُ عَلَى الَّذِينَ مِن قَبْلِنَا ۚ رَبَّنَا وَلَا تُحَمِّلْنَا مَا لَا طَاقَةَ لَنَا بِهِ ۖ وَاعْفُ عَنَّا وَاغْفِرْ لَنَا وَارْحَمْنَا ۚ أَنتَ مَوْلَانَا فَانصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ",
        source: "البقرة: 285-286",
        fadl: "آيتان من آخر سورة البقرة، من قرأهما في ليلة كفتاه، وهما حماية من الشياطين وحصن منيع حتى الصباح.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُ لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ ۚ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ ۚ لَّهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ ۗ مَن ذَا الَّذِي يَشْفَعُ عِندَهُ إِلَّا بِإِذْنِهِ ۚ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ ۖ وَلَا يُحِيطُونَ بِشَيْءٍ مِّنْ عِلْمِهِ إِلَّا بِمَا شَاءَ ۚ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ ۖ وَلَا يَئُودُهُ حِفْظُهُمَا ۚ وَهُوَ الْعَلِيُّ الْعَظِيمُ",
        source: "آية الكرسي - البقرة: 255",
        fadl: "أعظم آية في القرآن، من قرأها عند النوم وُكّل به ملك من الله يحرسه حتى يصبح، ولا يقربه شيطان حتى يصبح.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ هُوَ اللَّهُ أَحَدٌ * اللَّهُ الصَّمَدُ * لَمْ يَلِدْ وَلَمْ يُولَدْ * وَلَمْ يَكُنْ لَهُ كُفُوًا أَحَدٌ﴾",
        source: "سورة الإخلاص",
        fadl: "تعدل ثلث القرآن، من قرأها مع المعوذتين قبل النوم حُفظ من كل سوء حتى يصبح، وهي حماية شاملة من الشياطين.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ * مِنْ شَرِّ مَا خَلَقَ * وَمِنْ شَرِّ غَاسِقٍ إِذَا وَقَبَ * وَمِنْ شَرِّ النَّفَّاثَاتِ فِي الْعُقَدِ * وَمِنْ شَرِّ حَاسِدٍ إِذَا حَسَدَ﴾",
        source: "سورة الفلق",
        fadl: "من المعوذات، تُقرأ مع الإخلاص والناس قبل النوم للحماية من السحر والحسد والشرور، وهي حصن منيع من كل أذى.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿قُلْ أَعُوذُ بِرَبِّ النَّاسِ * مَلِكِ النَّاسِ * إِلَهِ النَّاسِ * مِنْ شَرِّ الْوَسْوَاسِ الْخَنَّاسِ * الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ * مِنَ الْجِنَّةِ وَالنَّاسِ﴾",
        source: "سورة الناس",
        fadl: "تحمي من وساوس الشياطين وشر الإنس والجن، تُقرأ مع المعوذتين قبل النوم لحماية شاملة من كل وسوسة وشر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّمَاوَاتِ وَالْأَرْضِ، رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ، وَأَنْ أَقْتَرِفَ عَلَى نَفْسِي سُوءًا أَوْ أَجُرَّهُ إِلَى مُسْلِمٍ",
        source: "أبو داود والترمذي",
        fadl: "دعاء عظيم للحماية من شر النفس والشيطان، من قاله عند النوم حُفظ من الوقوع في المعاصي وإيذاء المسلمين.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "بِاسْمِكَ اللَّهُمَّ أَمُوتُ وَأَحْيَا",
        source: "البخاري ومسلم",
        fadl: "دعاء مختصر وجامع للنوم، فيه إقرار بأن الموت والحياة بيد الله وحده، ومن قاله فقد أقر بتوحيد الله.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا، وَكَفَانَا، وَآوَانَا، فَكَمْ مِمَّنْ لَا كَافِيَ لَهُ وَلَا مُؤْوِيَ",
        source: "صحيح مسلم",
        fadl: "حمد وشكر لله على نعمه العظيمة من طعام وشراب ومأوى، وفيه تذكر بحال الفقراء والمحتاجين، ومن حمد الله على نعمه زادها الله.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ رَبَّ السَّمَاوَاتِ السَّبْعِ وَمَا أَظَلَّتْ، وَرَبَّ الْأَرَضِينَ وَمَا أَقَلَّتْ، وَرَبَّ الشَّيَاطِينِ وَمَا أَضَلَّتْ، كُنْ لِي جَارًا مِنْ خَلْقِكَ كُلِّهِمْ جَمِيعًا أَنْ يَفْرُطَ عَلَيَّ أَحَدٌ مِنْهُمْ أَوْ أَنْ يَبْغِيَ عَلَيَّ، عَزَّ جَارُكَ، وَجَلَّ ثَنَاؤُكَ وَلَا إِلَهَ غَيْرُكَ، وَلَا إِلَهَ إِلَّا أَنْتَ",
        source: "الترمذي",
        fadl: "دعاء للأرق وعدم النوم، من قاله عند القلق في فراشه أمنه الله من شر خلقه، وعز جاره الله فلا يُهان ولا يُضام.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّةِ مِنْ غَضَبِهِ وَعِقَابِهِ، وَشَرِّ عِبَادِهِ، وَمِنْ هَمَزَاتِ الشَّيَاطِينِ وَأَنْ يَحْضُرُونِ",
        source: "أبو داود والترمذي",
        fadl: "استعاذة عظيمة من الفزع والقلق، تُقال عند الخوف من الأحلام المزعجة والوساوس، وهي حماية من همزات الشياطين.",
        count: 1,
        currentCount: 0,
      },
    ],
  },
  wakeup: {
    title: "أذكار الاستيقاظ",
    description: "أذكار الاستيقاظ من النوم",
    icon: "fas fa-sun",
    adhkar: [
      {
        text: "الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا بَعْدَ مَا أَمَاتَنَا وَإِلَيْهِ النُّشُورُ",
        source: "البخاري ومسلم",
        fadl: "أول ما يُقال عند الاستيقاظ، فيه حمد لله على نعمة الحياة بعد النوم الذي هو أخو الموت، وإقرار بالبعث والنشور.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "الْحَمْدُ لِلَّهِ الَّذِي عَافَانِي فِي جَسَدِي وَرَدَّ عَلَيَّ رُوحِي وَأَذِنَ لِي بِذِكْرِهِ",
        source: "الترمذي",
        fadl: "حمد وشكر لله على العافية في البدن ورد الروح والإذن بالذكر، من قاله عند الاستيقاظ بدأ يومه بالشكر والعرفان.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ، وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، سُبْحَانَ اللَّهِ، وَالْحَمْدُ لِلَّهِ، وَلَا إِلَهَ إِلَّا اللَّهُ وَاللَّهُ أَكْبَرُ، وَلَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللَّهِ الْعَلِيِّ الْعَظِيمِ، رَبِّ اغْفِرْ لِي",
        source: "أبو داود",
        fadl: "ذكر جامع للتوحيد والتسبيح والحمد والتكبير والاستغفار، من قاله عند الاستيقاظ غُفر له، وإن دعا الله استُجيب له.",
        count: 1,
        currentCount: 0,
      },
    ],
  },
  general: {
    title: "أذكار عامة",
    description: "أذكار متنوعة للمسلم في يومه",
    icon: "fas fa-star-and-crescent",
    adhkar: [
      {
        text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ",
        source: "البخاري ومسلم",
        fadl: "من قالها مائة مرة كانت له عدل عشر رقاب، وكُتبت له مائة حسنة، ومُحيت عنه مائة سيئة، وكانت له حرزاً من الشيطان يومه ذلك.",
        count: 100,
        currentCount: 0,
      },
      {
        text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ، سُبْحَانَ اللَّهِ الْعَظِيمِ",
        source: "البخاري ومسلم",
        fadl: "كلمتان خفيفتان على اللسان، ثقيلتان في الميزان، حبيبتان إلى الرحمن، ومن قالهما غُرست له نخلة في الجنة.",
        fadl: "كلمتان خفيفتان على اللسان، ثقيلتان في الميزان، حبيبتان إلى الرحمن، ومن قالهما غُرست له نخلة في الجنة.",
        count: 10,
        currentCount: 0,
      },
      {
        text: "لَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللَّهِ",
        source: "البخاري ومسلم",
        fadl: "كنز من كنوز الجنة، ولا حول ولا قوة إلا بالله تُذهب الهم والحزن، وتُعين على أمور الدنيا والآخرة.",
        count: 10,
        currentCount: 0,
      },
      {
        text: "رَبِّ اغْفِرْ لِي ذَنْبِي وَخَطَئِي وَجَهْلِي",
        source: "البخاري ومسلم",
        fadl: "دعاء جامع للاستغفار من جميع أنواع الذنوب، وهو من أحب الدعاء إلى الله لأنه اعتراف بالتقصير وطلب المغفرة.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَعِنِّي عَلَى ذِكْرِكَ وَشُكْرِكَ وَحُسْنِ عِبَادَتِكَ",
        source: "أبو داود والنسائي",
        fadl: "دعاء شامل للتوفيق في أعظم الأعمال: الذكر والشكر وحسن العبادة، ومن أُعين عليها فقد أُعين على خير الدنيا والآخرة.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ مِنَ الْخَيْرِ كُلِّهِ عَاجِلِهِ وَآجِلِهِ، مَا عَلِمْتُ مِنْهُ وَمَا لَمْ أَعْلَمْ، وَأَعُوذُ بِكَ مِنَ الشَّرِّ كُلِّهِ عَاجِلِهِ وَآجِلِهِ، مَا عَلِمْتُ مِنْهُ وَمَا لَمْ أَعْلَمْ",
        source: "ابن ماجه",
        fadl: "دعاء جامع لجميع خيرات الدنيا والآخرة والاستعاذة من جميع الشرور، وهو من أوسع الأدعية وأشملها للخير.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "رَضِيتُ بِاللَّهِ رَبًّا، وَبِالْإِسْلَامِ دِينًا، وَبِمُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ رَسُولًا",
        source: "أبو داود",
        fadl: "من قالها ثلاثاً حين يصبح وحين يمسي كان حقاً على الله أن يُرضيه يوم القيامة، وهي إقرار بالرضا بأركان الإيمان.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ",
        source: "أبو داود",
        fadl: "من قالها سبع مرات كفاه الله ما أهمه من أمر الدنيا والآخرة، وهي آية التوكل والاعتماد على الله وحده.",
        count: 7,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ صَلِّ وَسَلِّمْ عَلَى نَبِيِّنَا مُحَمَّدٍ",
        source: "البخاري ومسلم",
        fadl: "من صلى على النبي صلاة صلى الله عليه بها عشراً، وهي سبب لنيل شفاعته وقربه يوم القيامة ومحبة الله.",
        count: 10,
        currentCount: 0,
      },
    ],
  },
  eating: {
    title: "أذكار الطعام",
    description: "أذكار الطعام والشراب",
    icon: "fas fa-utensils",
    adhkar: [
      {
        text: "بِسْمِ اللَّهِ",
        source: "البخاري ومسلم",
        fadl: "من قال بسم الله عند الأكل لم يضره ما أكل، وبُورك له فيه، وكان الطعام طيباً مباركاً.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ بَارِكْ لَنَا فِيمَا رَزَقْتَنَا، وَقِنَا عَذَابَ النَّارِ",
        source: "الترمذي",
        fadl: "دعاء بالبركة في الرزق والوقاية من عذاب النار، ومن دعا بذلك عند الطعام بُورك له في رزقه وطعامه.",
        fadl: "دعاء بالبركة في الرزق والوقاية من عذاب النار، ومن دعا بذلك عند الطعام بُورك له في رزقه وطعامه.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا، وَجَعَلَنَا مُسْلِمِينَ",
        source: "أبو داود والترمذي",
        fadl: "حمد الله على نعمة الطعام والشراب والإسلام، ومن قاله بعد الأكل كُتب له أجر عظيم وشُكر الله نعمته عليه.",
        count: 1,
        currentCount: 0,
      },
    ],
  },
  travel: {
    title: "أذكار السفر",
    description: "أذكار السفر والرحلات",
    icon: "fas fa-plane",
    adhkar: [
      {
        text: "اللَّهُ أَكْبَرُ، اللَّهُ أَكْبَرُ، اللَّهُ أَكْبَرُ، سُبْحَانَ الَّذِي سَخَّرَ لَنَا هَذَا وَمَا كُنَّا لَهُ مُقْرِنِينَ، وَإِنَّا إِلَى رَبِّنَا لَمُنْقَلِبُونَ",
        source: "أبو داود والترمذي",
        fadl: "دعاء السفر المستجاب، من قاله عند السفر سُهل له طريقه وبُورك له في سفره وحُفظ من شرور الطريق.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنَّا نَسْأَلُكَ فِي سَفَرِنَا هَذَا الْبِرَّ وَالتَّقْوَى، وَمِنَ الْعَمَلِ مَا تَرْضَى، اللَّهُمَّ هَوِّنْ عَلَيْنَا سَفَرَنَا هَذَا، وَاطْوِ عَنَّا بُعْدَهُ، اللَّهُمَّ أَنْتَ الصَّاحِبُ فِي السَّفَرِ، وَالْخَلِيفَةُ فِي الْأَهْلِ",
        source: "صحيح مسلم",
        fadl: "دعاء شامل للبر والتقوى في السفر وتسهيل الطريق، ومن دعا به كان الله صاحبه في السفر وخليفته في الأهل.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ",
        source: "صحيح مسلم",
        fadl: "من أعظم الأدعية للحماية من كل شر، من قالها لم يضره شيء حتى يرتحل من منزله، وهي حصن من كل سوء.",
        count: 3,
        currentCount: 0,
      },
    ],
  },
  dua: {
    title: "الأدعية من الكتاب والسنة",
    description: "أدعية مباركة من القرآن الكريم والسنة النبوية",
    icon: "fas fa-hands-praying",
    adhkar: [
      {
        text: "رَبَّنَا آتِنَا فِي الدُّنْيَا حَسَنَةً وَفِي الْآخِرَةِ حَسَنَةً وَقِنَا عَذَابَ النَّارِ",
        source: "البقرة: 201",
        fadl: "من أجمع الأدعية وأنفعها، يشمل خير الدنيا والآخرة والحماية من النار، وكان النبي ﷺ يُكثر من هذا الدعاء.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "رَبَّنَا اغْفِرْ لَنَا ذُنُوبَنَا وَإِسْرَافَنَا فِي أَمْرِنَا وَثَبِّتْ أَقْدَامَنَا وَانصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ",
        source: "آل عمران: 147",
        fadl: "دعاء الأنبياء والمؤمنين للمغفرة والثبات والنصر، ومن دعا به أُجيب دعاؤه وثُبت على الحق ونُصر على الأعداء.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "رَبِّ اشْرَحْ لِي صَدْرِي وَيَسِّرْ لِي أَمْرِي وَاحْلُلْ عُقْدَةً مِّن لِّسَانِي يَفْقَهُوا قَوْلِي",
        source: "طه: 25-28",
        fadl: "دعاء موسى عليه السلام، من دعا به شُرح صدره وسُهل أمره وأُعين على البيان والفصاحة، وهو دعاء عظيم للدعاة والمعلمين.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "رَبِّ زِدْنِي عِلْمًا",
        source: "طه: 114",
        fadl: "الدعاء الوحيد الذي أمر الله نبيه بطلب الاستزادة منه، ومن دعا به زاده الله علماً ونوراً وفهماً وحكمة.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "رَبَّنَا لَا تُزِغْ قُلُوبَنَا بَعْدَ إِذْ هَدَيْتَنَا وَهَبْ لَنَا مِن لَّدُنكَ رَحْمَةً إِنَّكَ أَنتَ الْوَهَّابُ",
        source: "آل عمران: 8",
        fadl: "دعاء الراسخين في العلم للثبات على الهداية، ومن دعا به ثُبت على دين الله ووُقي من الفتن والضلال.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَصْلِحْ لِي دِينِي الَّذِي هُوَ عِصْمَةُ أَمْرِي، وَأَصْلِحْ لِي دُنْيَايَ الَّتِي فِيهَا مَعَاشِي، وَأَصْلِحْ لِي آخِرَتِي الَّتِي فِيهَا مَعَادِي، وَاجْعَلِ الْحَيَاةَ زِيَادَةً لِي فِي كُلِّ خَيْرٍ، وَاجْعَلِ الْمَوْتَ رَاحَةً لِي مِنْ كُلِّ شَرٍّ",
        source: "صحيح مسلم",
        fadl: "دعاء جامع لإصلاح الدين والدنيا والآخرة، ومن دعا به أُصلحت له أموره كلها وجُعلت حياته في خير وموته راحة من الشر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ الْهُدَى وَالتُّقَى وَالْعَفَافَ وَالْغِنَى",
        source: "صحيح مسلم",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْهَمِّ وَالْحَزَنِ، وَأَعُوذُ بِكَ مِنَ الْعَجْزِ وَالْكَسَلِ، وَأَعُوذُ بِكَ مِنَ الْجُبْنِ وَالْبُخْلِ، وَأَعُوذُ بِكَ مِنْ غَلَبَةِ الدَّيْنِ وَقَهْرِ الرِّجَالِ",
        source: "البخاري",
        fadl: "دعاء جامع لإصلاح الدين والدنيا والآخرة، ومن دعا به أُصلحت له أموره كلها وجُعلت حياته في خير وموته راحة من الشر.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ مِنَ الْخَيْرِ كُلِّهِ عَاجِلِهِ وَآجِلِهِ، مَا عَلِمْتُ مِنْهُ وَمَا لَمْ أَعْلَمْ، وَأَعُوذُ بِكَ مِنَ الشَّرِّ كُلِّهِ عَاجِلِهِ وَآجِلِهِ، مَا عَلِمْتُ مِنْهُ وَمَا لَمْ أَعْلَمْ",
        source: "ابن ماجه",
        fadl: "من أجمع الأدعية وأشملها، يطلب جميع خيرات الدنيا والآخرة ويستعيذ من جميع الشرور، وهو دعاء عظيم المنفعة.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ عَافِنِي فِي بَدَنِي، اللَّهُمَّ عَافِنِي فِي سَمْعِي، اللَّهُمَّ عَافِنِي فِي بَصَرِي، لَا إِلَهَ إِلَّا أَنْتَ",
        source: "أبو داود",
        fadl: "دعاء بالعافية في البدن والحواس، من داوم عليه حُفظ في بدنه وسمعه وبصره، وعوفي من الأسقام والعاهات.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَافِيَةَ فِي الدُّنْيَا وَالْآخِرَةِ",
        source: "ابن ماجه",
        fadl: "دعاء جامع للعافية في الدارين، والعافية خير ما يُسأل الله، فهي السلامة من جميع البلايا والمحن.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "رَبِّ اغْفِرْ لِي خَطَئِي وَجَهْلِي وَإِسْرَافِي فِي أَمْرِي، وَمَا أَنتَ أَعْلَمُ بِهِ مِنِّي، اللَّهُمَّ اغْفِرْ لِي جِدِّي وَهَزْلِي وَخَطَئِي وَعَمْدِي وَكُلُّ ذَلِكَ عِندِي",
        source: "البخاري ومسلم",
        fadl: "دعاء شامل للاستغفار من جميع أنواع الذنوب، يشمل الخطأ والجهل والإسراف والجد والهزل، وهو اعتراف بالتقصير أمام الله.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ أَعِنِّي عَلَى ذِكْرِكَ وَشُكْرِكَ وَحُسْنِ عِبَادَتِكَ",
        source: "أبو داود والنسائي",
        fadl: "دعاء للتوفيق في أعظم الأعمال: الذكر والشكر والعبادة، ومن أُعين على هذه الثلاثة فقد أُعين على خير الدنيا والآخرة.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنَّكَ عَفُوٌّ كَرِيمٌ تُحِبُّ الْعَفْوَ، فَاعْفُ عَنِّي",
        source: "الترمذي وابن ماجه",
        fadl: "دعاء ليلة القدر العظيم، ومن قاله غُفرت ذنوبه وعُفي عنه، والعفو أبلغ من المغفرة لأنه محو الذنب بالكلية.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ اهْدِنِي فِيمَنْ هَدَيْتَ، وَعَافِنِي فِيمَنْ عَافَيْتَ، وَتَوَلَّنِي فِيمَنْ تَوَلَّيْتَ، وَبَارِكْ لِي فِيمَا أَعْطَيْتَ، وَقِنِي شَرَّ مَا قَضَيْتَ، فَإِنَّكَ تَقْضِي وَلَا يُقْضَى عَلَيْكَ، إِنَّهُ لَا يَذِلُّ مَن وَالَيْتَ، تَبَارَكْتَ رَبَّنَا وَتَعَالَيْتَ",
        source: "أبو داود والنسائي",
        fadl: "دعاء الوتر الشامل، جمع الهداية والعافية والتولي والبركة والحماية، ومن دعا به في وتره استُجيب له وبُورك في أمره.",
        fadl: "دعاء الوتر الشامل، جمع الهداية والعافية والتولي والبركة والحماية، ومن دعا به في وتره استُجيب له وبُورك في أمره.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "يَا حَيُّ يَا قَيُّومُ بِرَحْمَتِكَ أَسْتَغِيثُ، أَصْلِحْ لِي شَأْنِي كُلَّهُ، وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ",
        source: "النسائي في الكبرى",
        fadl: "دعاء الاستغاثة بالحي القيوم، من أعظم أسماء الله، ومن دعا به أُصلح شأنه كله ولم يُوكل إلى نفسه لحظة واحدة.",
        count: 3,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ رَبَّ السَّمَاوَاتِ وَرَبَّ الْأَرْضِ وَرَبَّ الْعَرْشِ الْعَظِيمِ، رَبَّنَا وَرَبَّ كُلِّ شَيْءٍ، فَالِقَ الْحَبِّ وَالنَّوَى، وَمُنزِلَ التَّوْرَاةِ وَالْإِنْجِيلِ وَالْفُرْقَانِ، أَعُوذُ بِكَ مِنْ شَرِّ كُلِّ شَيْءٍ أَنْتَ آخِذٌ بِنَاصِيَتِهِ",
        source: "صحيح مسلم",
        fadl: "من أعظم الأدعية والاستعاذات، يجمع أسماء الله وصفاته وآثار ربوبيته، ومن دعا به حُمي من شر كل شيء.",
        count: 1,
        currentCount: 0,
      },
      {
        text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ بِأَنَّ لَكَ الْحَمْدَ لَا إِلَهَ إِلَّا أَنْتَ الْمَنَّانُ بَدِيعُ السَّمَاوَاتِ وَالْأَرْضِ يَا ذَا الْجَلَالِ وَالْإِكْرَامِ يَا حَيُّ يَا قَيُّومُ",
        source: "أبو داود والترمذي",
        fadl: "دعاء بأعظم أسماء الله الحسنى، ومن دعا الله بها استُجيب له، وهو الاسم الأعظم الذي إذا دُعي الله به أجاب.",
        count: 1,
        currentCount: 0,
      },
    ],
  },
};

// Global variables
let currentCategory = null;
let isHomePage = true;
let currentCount = 0;
let totalCount = 0;
let currentZikrText = "";
let currentZikrIndex = null;

// Enhanced global variables for UX improvements
let favorites = JSON.parse(localStorage.getItem("zekrFavorites")) || [];
let userPreferences = JSON.parse(localStorage.getItem("userPreferences")) || {
  fontSize: "medium",
  autoPlay: false,
  showFadl: true,
  soundEnabled: true,
  lastCategory: "all",
};
let dailyProgress = JSON.parse(localStorage.getItem("dailyProgress")) || {
  date: new Date().toDateString(),
  completedZekr: [],
  streak: parseInt(localStorage.getItem("dailyStreak")) || 0,
  totalCompletions: parseInt(localStorage.getItem("totalCompletions")) || 0,
};

// Check and update daily progress
function checkDailyProgress() {
  const today = new Date().toDateString();
  if (dailyProgress.date !== today) {
    // New day - reset daily progress but maintain streak
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);

    if (
      dailyProgress.date === yesterday.toDateString() &&
      dailyProgress.completedZekr.length > 0
    ) {
      dailyProgress.streak++;
    } else if (dailyProgress.completedZekr.length === 0) {
      dailyProgress.streak = 0;
    }

    dailyProgress.date = today;
    dailyProgress.completedZekr = [];
    saveDailyProgress();
  }
  updateProgressStats();
}

function saveDailyProgress() {
  localStorage.setItem("dailyProgress", JSON.stringify(dailyProgress));
  localStorage.setItem("dailyStreak", dailyProgress.streak.toString());
  localStorage.setItem(
    "totalCompletions",
    dailyProgress.totalCompletions.toString()
  );
}

function getWeeklyCompletions() {
  const now = new Date();
  const oneWeekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);

  // For now, return a simple calculation based on daily progress
  // This can be enhanced later with more detailed tracking
  return Math.min(
    dailyProgress.completedZekr.length * 7,
    dailyProgress.totalCompletions
  );
}

function updateProgressStats() {
  console.log("updateProgressStats called");
  const totalZekr = Object.values(adhkarData).reduce(
    (sum, category) => sum + category.adhkar.length,
    0
  );
  const completedToday = dailyProgress.completedZekr.length;
  console.log(
    `Stats: ${completedToday} completed today, ${totalZekr} total adhkar`
  );
  const completionRate =
    totalZekr > 0 ? Math.round((completedToday / totalZekr) * 100) : 0;
  const favoritesCount = favorites.length;

  // Update stats in the DOM if elements exist (matching HTML IDs)
  const dailyStreakEl = document.getElementById("dailyStreak");
  const totalCompletionsEl = document.getElementById("totalCompletions");
  const todayCompletionsEl = document.getElementById("todayCompletions");
  const weekCompletionsEl = document.getElementById("weekCompletions");

  if (dailyStreakEl) {
    dailyStreakEl.textContent = dailyProgress.streak || 0;
    console.log(`Updated streak: ${dailyProgress.streak || 0}`);
  }
  if (totalCompletionsEl) {
    totalCompletionsEl.textContent = dailyProgress.totalCompletions;
    console.log(`Updated total completions: ${dailyProgress.totalCompletions}`);
  }
  if (todayCompletionsEl) {
    todayCompletionsEl.textContent = completedToday;
    console.log(`Updated today completions: ${completedToday}`);
  }
  if (weekCompletionsEl) {
    weekCompletionsEl.textContent = getWeeklyCompletions();
    console.log(`Updated weekly completions: ${getWeeklyCompletions()}`);
  }
}

// Notification system
function showNotification(message, type = "success") {
  const notification = document.querySelector(".notification");
  if (!notification) return;

  const icon = notification.querySelector("i");
  const textSpan = notification.querySelector("span");

  // Update icon based on type
  if (icon) {
    icon.className =
      type === "success"
        ? "fas fa-check-circle"
        : type === "warning"
        ? "fas fa-exclamation-triangle"
        : "fas fa-info-circle";
  }

  // Update message
  if (textSpan) textSpan.textContent = message;

  // Update colors
  if (type === "success") {
    notification.style.background = "#38a169";
  } else if (type === "info") {
    notification.style.background = "#667eea";
  } else if (type === "warning") {
    notification.style.background = "#ed8936";
  }

  notification.classList.add("show");

  setTimeout(() => {
    notification.classList.remove("show");
  }, 3000);
}

// Celebration modal
function showCelebration(title, message, isComplete = false) {
  const celebration = document.querySelector(".celebration");
  if (!celebration) return;

  const icon = celebration.querySelector(".celebration-icon");
  const titleEl = celebration.querySelector("h3");
  const messageEl = celebration.querySelector("p");

  if (titleEl) titleEl.textContent = title;
  if (messageEl) messageEl.textContent = message;

  if (icon) {
    icon.innerHTML = isComplete ? "🎉" : "⭐";
  }

  if (isComplete) {
    celebration.style.background = "linear-gradient(135deg, #38a169, #48bb78)";
  } else {
    celebration.style.background = "linear-gradient(135deg, #667eea, #764ba2)";
  }

  celebration.classList.add("show");
}

function hideCelebration() {
  const celebration = document.querySelector(".celebration");
  if (celebration) celebration.classList.remove("show");
}

// Font size controls
function setFontSize(size, showNotif = true) {
  const root = document.documentElement;
  const buttons = document.querySelectorAll(".font-btn");

  // Remove active class from all buttons
  buttons.forEach((btn) => btn.classList.remove("active"));

  // Add active class to selected button
  const activeBtn = document.querySelector(
    `[onclick*="setFontSize('${size}')"]`
  );
  if (activeBtn) activeBtn.classList.add("active");

  // Set CSS variable
  switch (size) {
    case "small":
      root.style.setProperty("--adhkar-font-size", "1.1rem");
      break;
    case "medium":
      root.style.setProperty("--adhkar-font-size", "1.3rem");
      break;
    case "large":
      root.style.setProperty("--adhkar-font-size", "1.6rem");
      break;
  }

  // Save preference
  userPreferences.fontSize = size;
  localStorage.setItem("userPreferences", JSON.stringify(userPreferences));

  // Only show notification if explicitly requested (user click)
  if (showNotif) {
    const sizeNames = { small: "صغير", medium: "متوسط", large: "كبير" };
    showNotification(`تم تغيير حجم الخط إلى ${sizeNames[size]}`);
  }
}

// Quick access functions
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: "smooth" });
  // showNotification("تم الانتقال إلى أعلى الصفحة");
}

function showFavorites() {
  if (favorites.length === 0) {
    showNotification("لم تضف أي أذكار إلى المفضلة بعد", "info");
    return;
  }

  // Create favorites display
  const favoriteZekr = [];
  Object.keys(adhkarData).forEach((categoryKey) => {
    const category = adhkarData[categoryKey];
    category.adhkar.forEach((zekr, index) => {
      const zekrId = `${categoryKey}_${index}`;
      if (favorites.includes(zekrId)) {
        favoriteZekr.push({
          category: category.title,
          zekr: zekr,
          categoryKey: categoryKey,
          index: index,
        });
      }
    });
  });

  showNotification(`عرض ${favorites.length} من الأذكار المفضلة`);
}

function toggleStats() {
  const stats = document.querySelector(".progress-stats");
  if (stats) {
    const isHidden = stats.style.display === "none";
    stats.style.display = isHidden ? "block" : "none";
    showNotification(isHidden ? "تم عرض الإحصائيات" : "تم إخفاء الإحصائيات");
  }
}

// Favorites system
function toggleFavorite(categoryKey, zekrIndex, event) {
  if (event) event.stopPropagation();

  const zekrId = `${categoryKey}_${zekrIndex}`;
  const index = favorites.indexOf(zekrId);
  const button = event ? event.target.closest(".favorite-btn") : null;

  if (index > -1) {
    favorites.splice(index, 1);
    if (button) button.classList.remove("active");
    showNotification("تم إزالة الذكر من المفضلة");
  } else {
    favorites.push(zekrId);
    if (button) button.classList.add("active");
    showNotification("تم إضافة الذكر إلى المفضلة");
  }

  localStorage.setItem("zekrFavorites", JSON.stringify(favorites));
  updateProgressStats();
}

function getCategoryDisplayName(category) {
  if (!category || !adhkarData[category]) return "غير محدد";
  return adhkarData[category].title;
}

// Enhanced completion tracking
function markZekrCompleted(categoryKey, zekrIndex) {
  const zekrId = `${categoryKey}_${zekrIndex}`;
  console.log(`markZekrCompleted called with: ${zekrId}`);

  if (!dailyProgress.completedZekr.includes(zekrId)) {
    dailyProgress.completedZekr.push(zekrId);
    dailyProgress.totalCompletions++;
    console.log(
      `Added to dailyProgress. Total completions: ${dailyProgress.totalCompletions}`
    );
    saveDailyProgress();
    updateProgressStats();

    // Check for completion milestones
    const completed = dailyProgress.completedZekr.length;
    const total = Object.values(adhkarData).reduce(
      (sum, category) => sum + category.adhkar.length,
      0
    );

    if (completed === total) {
      showCelebration(
        "مبروك! 🎉",
        "لقد أكملت جميع الأذكار اليوم! جزاك الله خيراً",
        true
      );
    } else if (completed === Math.floor(total / 2)) {
      showCelebration(
        "إنجاز رائع! ⭐",
        "لقد أكملت نصف الأذكار اليوم، استمر بارك الله فيك"
      );
    } else if (completed % 5 === 0 && completed > 0) {
      showCelebration(
        "أحسنت! 🌟",
        `أكملت ${completed} من الأذكار، استمر في ذكر الله`
      );
    }
  } else {
    console.log(`${zekrId} already marked as completed`);
  }
}

// DOM Elements
const homePage = document.getElementById("homePage");
const categoryPage = document.getElementById("categoryPage");
const categoriesContainer = document.getElementById("categoriesContainer");
const categoryTitle = document.getElementById("categoryTitle");
const categoryDescription = document.getElementById("categoryDescription");
const adhkarContainer = document.getElementById("adhkarContainer");
const searchInput = document.getElementById("searchInput");
const modal = document.getElementById("counterModal");
const closeModal = document.querySelector(".close");
const countNumber = document.getElementById("countNumber");
const totalCountSpan = document.getElementById("totalCount");
const countBtn = document.getElementById("countBtn");
const resetBtn = document.getElementById("resetBtn");
const progressFill = document.getElementById("progressFill");
const modalTitle = document.getElementById("modalTitle");
const fadlText = document.getElementById("fadlText");
const homeBtn = document.getElementById("homeBtn");
const backBtn = document.getElementById("backBtn");
const resetAllBtn = document.getElementById("resetAllBtn");

// Theme management functions
function loadTheme() {
  const savedTheme = localStorage.getItem("adhkar-theme");
  const themeToggle = document.getElementById("themeToggle");
  const themeIcon = themeToggle.querySelector("i");
  const themeText =
    themeToggle.querySelector("span") || themeToggle.childNodes[2];

  // Default to dark mode if no theme is saved, only use light mode if explicitly set
  if (savedTheme === "light") {
    document.body.classList.remove("dark-mode");
    document.body.classList.add("light-mode");
    themeIcon.className = "fas fa-moon";
    if (themeText && themeText.textContent) {
      themeText.textContent = " الوضع الليلي";
    } else {
      themeToggle.innerHTML = '<i class="fas fa-moon"></i> الوضع الليلي';
    }
  } else {
    // Default to dark mode (includes both null and "dark" cases)
    document.body.classList.add("dark-mode");
    document.body.classList.remove("light-mode");
    themeIcon.className = "fas fa-sun";
    if (themeText && themeText.textContent) {
      themeText.textContent = " الوضع النهاري";
    } else {
      // If no text node exists, update the button text content
      themeToggle.innerHTML = '<i class="fas fa-sun"></i> الوضع النهاري';
    }
  }
}

function toggleTheme() {
  const themeToggle = document.getElementById("themeToggle");
  const themeIcon = themeToggle.querySelector("i");

  // Add transition class for smooth animation
  document.body.classList.add("theme-transition");

  if (document.body.classList.contains("dark-mode")) {
    // Switch to light mode
    document.body.classList.remove("dark-mode");
    document.body.classList.add("light-mode");
    themeIcon.className = "fas fa-moon";
    themeToggle.innerHTML = '<i class="fas fa-moon"></i> الوضع الليلي';
    localStorage.setItem("adhkar-theme", "light");
  } else {
    // Switch to dark mode
    document.body.classList.add("dark-mode");
    document.body.classList.remove("light-mode");
    themeIcon.className = "fas fa-sun";
    themeToggle.innerHTML = '<i class="fas fa-sun"></i> الوضع النهاري';
    localStorage.setItem("adhkar-theme", "dark");
  }

  // Remove transition class after animation completes
  setTimeout(() => {
    document.body.classList.remove("theme-transition");
  }, 300);
}

// Initialize the app
document.addEventListener("DOMContentLoaded", function () {
  loadTheme(); // Load saved theme preference
  loadProgress();
  showHomePage();
  setupEventListeners();
  showInstallPrompt(); // Show install prompt for first-time users
});

// PWA Install prompt functionality
let deferredPrompt;
let installPromptShown = false;

// Listen for the beforeinstallprompt event
window.addEventListener("beforeinstallprompt", (e) => {
  // Prevent the mini-infobar from appearing on mobile
  e.preventDefault();
  // Save the event so it can be triggered later
  deferredPrompt = e;
  // Install button is already visible, so no need to show it
});

// Listen for the app being installed
window.addEventListener("appinstalled", () => {
  // Keep the install button visible but maybe change its text
  const installBtn = document.getElementById("installBtn");
  if (installBtn) {
    installBtn.innerHTML = '<i class="fas fa-check"></i> تم التثبيت';
    installBtn.style.opacity = "0.7";
  }
  // Clear the deferredPrompt
  deferredPrompt = null;
  console.log("PWA was installed successfully");
});

function showInstallPrompt() {
  // Check if this is the first visit
  const isFirstVisit = !localStorage.getItem("adhkar-visited");

  // Keep install button visible for easy access
  const installBtn = document.getElementById("installBtn");
  if (installBtn) {
    installBtn.style.display = "block";
  }

  // Don't show automatic install prompt if already installed
  if (
    window.matchMedia &&
    window.matchMedia("(display-mode: standalone)").matches
  ) {
    return; // Don't show install prompt if already installed, but keep button visible
  }

  if (isFirstVisit && !installPromptShown) {
    // Mark as visited
    localStorage.setItem("adhkar-visited", "true");

    // Show install prompt after a short delay
    setTimeout(() => {
      showInstallModal();
      installPromptShown = true;
    }, 2000);
  }
}

function showInstallModal() {
  // Create install modal
  const installModal = document.createElement("div");
  installModal.className = "modal";
  installModal.id = "installModal";
  installModal.style.display = "block";

  installModal.innerHTML = `
    <div class="modal-content install-modal-content">
      <span class="close" id="installClose">&times;</span>
      <div class="install-content">
        <div class="install-icon">
          <i class="fas fa-download"></i>
        </div>
        <h3>إضافة التطبيق للشاشة الرئيسية</h3>
        <p>للوصول السريع للأذكار الإسلامية، يمكنك إضافة هذا التطبيق إلى الشاشة الرئيسية لهاتفك.</p>
        <div class="install-buttons">
          <button id="installApp" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            إضافة للشاشة الرئيسية
          </button>
          <button id="installLater" class="btn btn-secondary">
            ربما لاحقاً
          </button>
        </div>
      </div>
    </div>
  `;

  document.body.appendChild(installModal);

  // Add event listeners
  document
    .getElementById("installClose")
    .addEventListener("click", closeInstallModal);
  document.getElementById("installApp").addEventListener("click", installApp);
  document
    .getElementById("installLater")
    .addEventListener("click", closeInstallModal);

  // Close when clicking outside
  installModal.addEventListener("click", (e) => {
    if (e.target === installModal) {
      closeInstallModal();
    }
  });
}

function installApp() {
  if (deferredPrompt) {
    // Show the install prompt
    deferredPrompt.prompt();

    // Wait for the user to respond to the prompt
    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === "accepted") {
        console.log("User accepted the install prompt");
        // Update the install button after successful installation
        const installBtn = document.getElementById("installBtn");
        if (installBtn) {
          installBtn.innerHTML = '<i class="fas fa-check"></i> تم التثبيت';
          installBtn.style.opacity = "0.7";
        }
      }
      deferredPrompt = null;
    });
  } else {
    // Show manual installation instructions
    showManualInstallInstructions();
  }

  closeInstallModal();
}

function showManualInstallInstructions() {
  const instructionsModal = document.createElement("div");
  instructionsModal.className = "modal";
  instructionsModal.style.display = "block";

  const userAgent = navigator.userAgent;
  let instructions = "";

  if (userAgent.includes("iPhone") || userAgent.includes("iPad")) {
    instructions = `
      <h4>إضافة للشاشة الرئيسية على iOS:</h4>
      <ol>
        <li>اضغط على أيقونة "المشاركة" <i class="fas fa-share"></i> في شريط Safari</li>
        <li>اختر "إضافة إلى الشاشة الرئيسية"</li>
        <li>اضغط "إضافة" في الزاوية العلوية</li>
      </ol>
    `;
  } else if (userAgent.includes("Android")) {
    instructions = `
      <h4>إضافة للشاشة الرئيسية على Android:</h4>
      <ol>
        <li>اضغط على القائمة الثلاث نقاط في Chrome</li>
        <li>اختر "إضافة إلى الشاشة الرئيسية"</li>
        <li>اضغط "إضافة"</li>
      </ol>
    `;
  } else {
    instructions = `
      <h4>إضافة للشاشة الرئيسية:</h4>
      <p>يمكنك إضافة هذا الموقع كاختصار على جهازك من خلال خيارات المتصفح.</p>
    `;
  }

  instructionsModal.innerHTML = `
    <div class="modal-content install-modal-content">
      <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
      <div class="install-content">
        <div class="install-icon">
          <i class="fas fa-info-circle"></i>
        </div>
        ${instructions}
        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn btn-primary">حسناً</button>
      </div>
    </div>
  `;

  document.body.appendChild(instructionsModal);
}

function closeInstallModal() {
  const installModal = document.getElementById("installModal");
  if (installModal) {
    installModal.remove();
  }
}

// Setup event listeners
function setupEventListeners() {
  // Modal events
  closeModal.addEventListener("click", closeCounterModal);
  window.addEventListener("click", function (e) {
    if (e.target === modal) {
      closeCounterModal();
    }
  });

  countBtn.addEventListener("click", incrementCounter);
  resetBtn.addEventListener("click", resetCounter);

  // Keyboard shortcuts
  document.addEventListener("keydown", function (e) {
    if (modal.style.display === "block") {
      if (e.key === "Escape") {
        closeCounterModal();
      } else if (e.key === " " || e.key === "Enter") {
        e.preventDefault();
        incrementCounter();
      } else if (e.key === "r" || e.key === "R") {
        resetCounter();
      }
    }
  });
}

// Show home page with category cards
function showHomePage() {
  // Reset all counters when leaving any category
  if (currentCategory) {
    resetCategoryCounters(currentCategory);
  }

  homePage.classList.remove("hidden");
  categoryPage.classList.add("hidden");
  backBtn.classList.add("hidden");
  homeBtn.classList.remove("active");
  isHomePage = true;
  currentCategory = null;

  // Clear and populate categories
  categoriesContainer.innerHTML = "";
  Object.keys(adhkarData).forEach((categoryKey, index) => {
    createCategoryCard(categoryKey, adhkarData[categoryKey], index);
  });
}

// Show category page with adhkar
function showCategoryPage(categoryKey) {
  homePage.classList.add("hidden");
  categoryPage.classList.remove("hidden");
  backBtn.classList.remove("hidden");
  homeBtn.classList.add("active");
  isHomePage = false;
  currentCategory = categoryKey;

  loadCategory(categoryKey);
}

// Create category card
function createCategoryCard(categoryKey, categoryData, index) {
  const card = document.createElement("div");
  card.className = "category-card fade-in";
  card.style.animationDelay = `${index * 0.1}s`;

  const adhkarCount = categoryData.adhkar.length;

  card.innerHTML = `
    <div class="category-icon">
      <i class="${categoryData.icon}"></i>
    </div>
    <h3 class="category-title">${categoryData.title}</h3>
    <p class="category-description">${categoryData.description}</p>
    <div class="category-count">${adhkarCount} ${
    adhkarCount === 1 ? "ذكر" : "أذكار"
  }</div>
  `;

  card.addEventListener("click", () => showCategoryPage(categoryKey));
  categoriesContainer.appendChild(card);
}

// Load category data
function loadCategory(category) {
  const data = adhkarData[category];
  categoryTitle.textContent = data.title;
  categoryDescription.textContent = data.description;

  adhkarContainer.innerHTML = "";

  data.adhkar.forEach((zikr, index) => {
    createAdhkarCard(zikr, index, category);
  });

  // Add fade-in animation
  adhkarContainer.classList.add("fade-in");
  setTimeout(() => {
    adhkarContainer.classList.remove("fade-in");
  }, 500);
}

// Create adhkar card
function createAdhkarCard(zikr, index, category) {
  const card = document.createElement("div");
  card.className = "adhkar-card fade-in";
  card.style.animationDelay = `${index * 0.1}s`;

  const isCompleted = zikr.currentCount >= zikr.count;
  const progressPercent = (zikr.currentCount / zikr.count) * 100;

  card.innerHTML = `
        <div class="adhkar-text">${zikr.text}</div>
        <div class="adhkar-info">
            <div class="adhkar-source">${zikr.source}</div>
            <div class="adhkar-count">${zikr.count}${
    zikr.count === 1 ? " مرة" : " مرات"
  }</div>
        </div>
        ${
          zikr.fadl
            ? `
        <div class="adhkar-fadl">
            <div class="fadl-text">${zikr.fadl}</div>
        </div>
        `
            : ""
        }
        <div class="adhkar-progress">
            <div class="progress-bar">
                <div class="progress-fill" style="width: ${progressPercent}%; background: ${
    isCompleted
      ? "linear-gradient(90deg, #38a169, #48bb78)"
      : "linear-gradient(90deg, #667eea, #764ba2)"
  }"></div>
            </div>
            <span class="progress-text">${zikr.currentCount}/${
    zikr.count
  }</span>
        </div>
        <div class="adhkar-actions">
            <button class="action-btn count-action-btn" onclick="incrementZikrCount('${category}', ${index})" ${
    isCompleted ? 'style="background: #38a169;"' : ""
  }>
                <i class="fas fa-plus"></i>
                ${isCompleted ? "مكتمل" : "عدّ"}
            </button>
            <button class="action-btn count-action-btn" onclick="openCounter('${
              zikr.text
            }', ${zikr.count}, '${category}', ${index})">
                <i class="fas fa-hand-pointer"></i>
                العداد
            </button>
            <button class="action-btn copy-btn" onclick="copyText('${zikr.text.replace(
              /'/g,
              "\\'"
            )}')">
                <i class="fas fa-copy"></i>
                نسخ
            </button>
        </div>
    `;

  adhkarContainer.appendChild(card);

  // Add click event to the entire card for counting
  card.addEventListener("click", function (e) {
    // Don't trigger if clicking on buttons
    if (e.target.tagName === "BUTTON" || e.target.tagName === "I") {
      return;
    }

    // Increment count when clicking anywhere on the card
    incrementZikrCount(category, index);
  });
}

// Increment zikr count directly on card
function incrementZikrCount(category, index) {
  const zikr = adhkarData[category].adhkar[index];

  if (zikr.currentCount < zikr.count) {
    zikr.currentCount++;

    // Add visual feedback - find the card and animate it
    const cards = document.querySelectorAll(".adhkar-card");
    if (cards[index]) {
      const card = cards[index];
      // Add pulse animation
      card.style.transform = "scale(0.98)";
      setTimeout(() => {
        card.style.transform = "scale(1)";
      }, 150);
    }

    // Vibration feedback (if supported)
    if (navigator.vibrate) {
      navigator.vibrate(50);
    }

    // Save progress
    saveProgress();

    // Update the specific card progress without reloading the entire page
    updateCardProgress(category, index);

    // Check if this individual zikr is completed and mark it
    if (zikr.currentCount === zikr.count) {
      console.log(`Completing zikr: ${category}_${index}`);
      markZekrCompleted(category, index);
    }

    // Check if all adhkar in the category are completed
    const categoryData = adhkarData[category];
    const allCompleted = categoryData.adhkar.every(
      (adhkar) => adhkar.currentCount === adhkar.count
    );

    if (allCompleted) {
      setTimeout(() => {
        showNotification("تم إكمال الاذكار! بارك الله فيك");
      }, 300);
    }
  }
}

// Reset all adhkar in current category
function resetAllAdhkar() {
  if (!currentCategory) return;

  // Show confirmation dialog
  if (confirm("هل أنت متأكد من إعادة تعيين جميع الأذكار في هذا القسم؟")) {
    // Reset all adhkar counts in the current category
    adhkarData[currentCategory].adhkar.forEach((zikr) => {
      zikr.currentCount = 0;
    });

    // Save progress
    saveProgress();

    // Update all cards in the current view
    updateAllCardsProgress(currentCategory);

    // Show notification
    showNotification("تم إعادة تعيين جميع الأذكار");
  }
}

// Update all cards progress without reloading
function updateAllCardsProgress(category) {
  if (!category) return;

  const cards = document.querySelectorAll(".adhkar-card");

  adhkarData[category].adhkar.forEach((zikr, index) => {
    if (cards[index]) {
      updateCardProgress(category, index);
    }
  });
}

// Reset all counters in a category when leaving it
function resetCategoryCounters(category) {
  if (!category || !adhkarData[category]) return;

  adhkarData[category].adhkar.forEach((zikr) => {
    zikr.currentCount = 0;
  });

  // Save progress
  saveProgress();
}

// Handle search
function handleSearch(e) {
  const searchTerm = e.target.value.toLowerCase().trim();
  const cards = document.querySelectorAll(".adhkar-card");

  cards.forEach((card) => {
    const text = card.querySelector(".adhkar-text").textContent.toLowerCase();
    const source = card
      .querySelector(".adhkar-source")
      .textContent.toLowerCase();

    if (text.includes(searchTerm) || source.includes(searchTerm)) {
      card.style.display = "block";
      card.classList.add("fade-in");
    } else {
      card.style.display = "none";
    }
  });
}

// Open counter modal
function openCounter(text, count, category, index) {
  currentZikrText = text;
  totalCount = count;
  currentCount = adhkarData[category].adhkar[index].currentCount;
  currentCategory = category;
  currentZikrIndex = index;

  const zikr = adhkarData[category].adhkar[index];

  modalTitle.textContent = `العداد - ${count} ${count === 1 ? "مرة" : "مرات"}`;
  totalCountSpan.textContent = count;

  // Display the fadl (virtue/benefit) if available
  if (zikr.fadl) {
    fadlText.textContent = zikr.fadl;
    document.getElementById("fadlSection").style.display = "block";
  } else {
    document.getElementById("fadlSection").style.display = "none";
  }

  updateCounterDisplay();

  modal.style.display = "block";
  document.body.style.overflow = "hidden";
}

// Close counter modal
function closeCounterModal() {
  modal.style.display = "none";
  document.body.style.overflow = "auto";

  // No need to reload the entire category -
  // the progress is already updated in real-time
}

// Increment counter
function incrementCounter() {
  if (currentCount < totalCount) {
    currentCount++;

    // Update the data
    if (currentCategory && currentZikrIndex !== null) {
      adhkarData[currentCategory].adhkar[currentZikrIndex].currentCount =
        currentCount;
    }

    updateCounterDisplay();

    // Update the progress bar on the main category page without reloading
    updateCardProgress(currentCategory, currentZikrIndex);

    // Add click animation
    countBtn.style.transform = "scale(0.9)";
    setTimeout(() => {
      countBtn.style.transform = "scale(1)";
    }, 150);

    // Vibration feedback (if supported)
    if (navigator.vibrate) {
      navigator.vibrate(50);
    }

    // Save progress
    saveProgress();

    // Update statistics
    updateProgressStats();

    // Check if completed
    if (currentCount === totalCount) {
      // Mark as completed for daily progress
      if (currentCategory && currentZikrIndex !== null) {
        markZekrCompleted(currentCategory, currentZikrIndex);
      }

      setTimeout(() => {
        showCompletionMessage();
      }, 300);
    }
  }
}

// Reset counter
function resetCounter() {
  currentCount = 0;

  // Update the data
  if (currentCategory && currentZikrIndex !== null) {
    adhkarData[currentCategory].adhkar[currentZikrIndex].currentCount = 0;
  }

  updateCounterDisplay();

  // Update the progress bar on the main category page without reloading
  updateCardProgress(currentCategory, currentZikrIndex);

  saveProgress();
}

// Update counter display
function updateCounterDisplay() {
  countNumber.textContent = currentCount;
  const progress = (currentCount / totalCount) * 100;
  progressFill.style.width = `${progress}%`;

  // Change color based on progress
  if (progress === 100) {
    countNumber.style.color = "#38a169";
    progressFill.style.background = "linear-gradient(90deg, #38a169, #48bb78)";
  } else {
    countNumber.style.color = "#667eea";
    progressFill.style.background = "linear-gradient(90deg, #667eea, #764ba2)";
  }
}

// Update specific card progress without reloading the page
function updateCardProgress(category, index) {
  if (!category || index === null) return;

  const zikr = adhkarData[category].adhkar[index];
  const cards = document.querySelectorAll(".adhkar-card");

  if (cards[index]) {
    const card = cards[index];
    const progressBar = card.querySelector(".progress-fill");
    const progressText = card.querySelector(".progress-text");
    const countBtn = card.querySelector(".count-action-btn");

    const isCompleted = zikr.currentCount >= zikr.count;
    const progressPercent = (zikr.currentCount / zikr.count) * 100;

    // Update progress bar
    if (progressBar) {
      progressBar.style.width = `${progressPercent}%`;
      progressBar.style.background = isCompleted
        ? "linear-gradient(90deg, #38a169, #48bb78)"
        : "linear-gradient(90deg, #667eea, #764ba2)";
    }

    // Update progress text
    if (progressText) {
      progressText.textContent = `${zikr.currentCount}/${zikr.count}`;
    }

    // Update count button appearance
    if (countBtn) {
      if (isCompleted) {
        countBtn.style.background = "#38a169";
        countBtn.innerHTML = '<i class="fas fa-plus"></i> مكتمل';
      } else {
        countBtn.style.background = "#667eea";
        countBtn.innerHTML = '<i class="fas fa-plus"></i> عدّ';
      }
    }
  }
}

// Show completion message
function showCompletionMessage() {
  const originalText = countBtn.innerHTML;
  countBtn.innerHTML = '<i class="fas fa-check"></i> تم الإكمال';
  countBtn.style.background = "#38a169";

  setTimeout(() => {
    countBtn.innerHTML = originalText;
    countBtn.style.background = "#667eea";
  }, 2000);
}

// Show notification
function showNotification(message) {
  // Create notification element
  const notification = document.createElement("div");
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: #38a169;
    color: white;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    z-index: 3000;
    font-family: 'Cairo', serif;
    font-weight: 600;
    animation: slideIn 0.3s ease;
  `;
  notification.textContent = message;

  // Add animation styles
  const style = document.createElement("style");
  style.textContent = `
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  `;
  document.head.appendChild(style);

  document.body.appendChild(notification);

  // Remove after 3 seconds
  setTimeout(() => {
    notification.style.animation = "slideIn 0.3s ease reverse";
    setTimeout(() => {
      if (document.body.contains(notification))
        document.body.removeChild(notification);
      if (document.head.contains(style)) document.head.removeChild(style);
    }, 300);
  }, 3000);
}

// Copy text to clipboard
function copyText(text) {
  const textArea = document.createElement("textarea");
  textArea.value = text;
  document.body.appendChild(textArea);
  textArea.select();
  document.execCommand("copy");
  document.body.removeChild(textArea);

  showNotification("تم نسخ النص");
}

// Touch/Swipe support for mobile
let touchStartX = 0;
let touchEndX = 0;

document.addEventListener("touchstart", (e) => {
  touchStartX = e.changedTouches[0].screenX;
});

document.addEventListener("touchend", (e) => {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
});

function handleSwipe() {
  const swipeDistance = touchEndX - touchStartX;
  const minSwipeDistance = 100;

  if (Math.abs(swipeDistance) > minSwipeDistance && !isHomePage) {
    if (swipeDistance > 0) {
      // Swipe right - go back to home
      showHomePage();
    }
  }
}

// Save progress to localStorage
function saveProgress() {
  localStorage.setItem("adhkarProgress", JSON.stringify(adhkarData));
}

// Load progress from localStorage
function loadProgress() {
  const saved = localStorage.getItem("adhkarProgress");
  if (saved) {
    try {
      const savedData = JSON.parse(saved);
      // Update currentCount for all adhkar
      Object.keys(savedData).forEach((categoryKey) => {
        if (adhkarData[categoryKey]) {
          savedData[categoryKey].adhkar.forEach((savedZikr, index) => {
            if (adhkarData[categoryKey].adhkar[index]) {
              adhkarData[categoryKey].adhkar[index].currentCount =
                savedZikr.currentCount || 0;
            }
          });
        }
      });
    } catch (error) {
      console.log("Error loading progress:", error);
    }
  }
}

// Auto-save progress
setInterval(saveProgress, 10000); // Save every 10 seconds

// Service Worker for offline functionality (optional)
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker
      .register("./sw.js")
      .then((registration) => {
        console.log("SW registered: ", registration);
      })
      .catch((registrationError) => {
        console.log("SW registration failed: ", registrationError);
      });
  });
}

// Hide suggestions when clicking outside
document.addEventListener("click", (e) => {
  if (!e.target.closest(".search-container")) {
    const suggestions = document.querySelector(".search-suggestions");
    if (suggestions) suggestions.style.display = "none";
  }
});

// Enhanced initialization
function initializeEnhancedFeatures() {
  // Load user preferences without showing notification
  if (userPreferences.fontSize) {
    setFontSize(userPreferences.fontSize, false);
  }

  // Check daily progress
  checkDailyProgress();

  // Update stats
  updateProgressStats();

  // Remove search functionality since search is removed

  // Add quick access button listeners
  const scrollTopBtn = document.getElementById("scrollTopBtn");
  const statsBtn = document.getElementById("statsBtn");
  const resetAllBtn = document.getElementById("resetAllBtn");
  const themeToggle = document.getElementById("themeToggle");
  const homeBtn = document.getElementById("homeBtn");
  const backBtn = document.getElementById("backBtn");
  const installBtn = document.getElementById("installBtn");

  if (scrollTopBtn) scrollTopBtn.addEventListener("click", scrollToTop);
  if (statsBtn) statsBtn.addEventListener("click", toggleStats);
  if (resetAllBtn) resetAllBtn.addEventListener("click", resetAllAdhkar);
  if (themeToggle) themeToggle.addEventListener("click", toggleTheme);
  if (homeBtn) homeBtn.addEventListener("click", showHomePage);
  if (backBtn) backBtn.addEventListener("click", showHomePage);
  if (installBtn) installBtn.addEventListener("click", showInstallModal);

  // Initialize enhanced theme
  initializeEnhancedTheme();

  // Show install prompt on first visit
  showInstallPrompt();
}

// Enhanced theme initialization
function initializeEnhancedTheme() {
  // Add transition class after theme is set
  setTimeout(() => {
    document.body.classList.add("theme-transition");
  }, 100);
}

// Enhanced counter modal opening
const originalOpenCounterModal = openCounterModal;
function openCounterModal(category, index) {
  // Call original function
  originalOpenCounterModal(category, index);

  // Add favorite button to modal
  addFavoriteButtonToModal(category, index);
}

function addFavoriteButtonToModal(category, index) {
  const modal = document.getElementById("counterModal");
  if (!modal) return;

  const zekrId = `${category}_${index}`;
  const isFavorite = favorites.includes(zekrId);

  // Remove existing favorite button if any
  const existingBtn = modal.querySelector(".modal-favorite-btn");
  if (existingBtn) existingBtn.remove();

  // Add favorite button
  const favoriteBtn = document.createElement("button");
  favoriteBtn.className = `modal-favorite-btn ${isFavorite ? "active" : ""}`;
  favoriteBtn.innerHTML = '<i class="fas fa-heart"></i>';
  favoriteBtn.style.cssText = `
    position: absolute;
    top: 20px;
    right: 60px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    z-index: 1001;
    color: ${isFavorite ? "#e53e3e" : "#e2e8f0"};
  `;

  favoriteBtn.onclick = (e) => toggleFavorite(category, index, e);

  modal.querySelector(".modal-content").appendChild(favoriteBtn);
}

// Enhanced count function with completion tracking
const originalCount = count;
function count() {
  // Call original count function
  originalCount();

  // Check if zikr is completed and mark it
  if (currentZikrIndex !== null && currentCategory) {
    const zikr = adhkarData[currentCategory].adhkar[currentZikrIndex];
    if (zikr && zikr.currentCount === zikr.count) {
      markZekrCompleted(currentCategory, currentZikrIndex);
    }
  }
}

// Install Prompt Functions
function showInstallPrompt() {
  // Check if user has already seen the prompt
  const hasSeenPrompt = localStorage.getItem("hasSeenInstallPrompt");
  const isStandalone = window.matchMedia("(display-mode: standalone)").matches;
  const isInWebAppiOS = window.navigator.standalone == true;

  // Don't show if already seen, already installed, or in app mode
  if (hasSeenPrompt || isStandalone || isInWebAppiOS) {
    return;
  }

  // Show after a short delay for better UX
  setTimeout(() => {
    const prompt = document.getElementById("installPrompt");
    if (prompt) {
      prompt.classList.add("show");
    }
  }, 3000);
}

function hideInstallPrompt(dontShowAgain = false) {
  const prompt = document.getElementById("installPrompt");
  if (prompt) {
    prompt.classList.remove("show");
  }

  if (dontShowAgain) {
    localStorage.setItem("hasSeenInstallPrompt", "true");
  }
}

// Category favorite functions
function toggleCategoryFavorite(categoryKey, event) {
  if (event) event.stopPropagation();

  const categoryFavorites =
    JSON.parse(localStorage.getItem("categoryFavorites")) || [];
  const index = categoryFavorites.indexOf(categoryKey);
  const button = event ? event.target.closest(".category-favorite-btn") : null;

  if (index > -1) {
    categoryFavorites.splice(index, 1);
    if (button) button.classList.remove("active");
    showNotification("تم إزالة التصنيف من المفضلة");
  } else {
    categoryFavorites.push(categoryKey);
    if (button) button.classList.add("active");
    showNotification("تم إضافة التصنيف إلى المفضلة");
  }

  localStorage.setItem("categoryFavorites", JSON.stringify(categoryFavorites));
}

function isCategoryFavorite(categoryKey) {
  const categoryFavorites =
    JSON.parse(localStorage.getItem("categoryFavorites")) || [];
  return categoryFavorites.includes(categoryKey);
}

// Enhanced displayCategories function to add favorite buttons
const originalDisplayCategories = displayCategories;
function displayCategories() {
  originalDisplayCategories();

  // Add favorite buttons to category cards after they're created
  setTimeout(() => {
    const categoryCards = document.querySelectorAll(".category-card");
    categoryCards.forEach((card, index) => {
      const categoryKey = Object.keys(adhkarData)[index];
      if (categoryKey) {
        addFavoriteButtonToCategory(card, categoryKey);
      }
    });
  }, 100);
}

function addFavoriteButtonToCategory(card, categoryKey) {
  // Remove existing button if any
  const existingBtn = card.querySelector(".category-favorite-btn");
  if (existingBtn) existingBtn.remove();

  // Create favorite button
  const favoriteBtn = document.createElement("button");
  favoriteBtn.className = `category-favorite-btn ${
    isCategoryFavorite(categoryKey) ? "active" : ""
  }`;
  favoriteBtn.innerHTML = '<i class="fas fa-heart"></i>';
  favoriteBtn.onclick = (e) => toggleCategoryFavorite(categoryKey, e);

  // Add to card
  card.style.position = "relative";
  card.appendChild(favoriteBtn);
}

// Install Prompt Functions
function showInstallPrompt() {
  // Check if user has already seen the prompt
  const hasSeenPrompt = localStorage.getItem("hasSeenInstallPrompt");
  const isStandalone = window.matchMedia("(display-mode: standalone)").matches;
  const isInWebAppiOS = window.navigator.standalone == true;

  // Don't show if already seen, already installed, or in app mode
  if (hasSeenPrompt || isStandalone || isInWebAppiOS) {
    return;
  }

  // Show after a short delay for better UX
  setTimeout(() => {
    const prompt = document.getElementById("installPrompt");
    if (prompt) {
      prompt.classList.add("show");
    }
  }, 3000);
}

function hideInstallPrompt(dontShowAgain = false) {
  const prompt = document.getElementById("installPrompt");
  if (prompt) {
    prompt.classList.remove("show");
  }

  if (dontShowAgain) {
    localStorage.setItem("hasSeenInstallPrompt", "true");
  }
}

// Function to show different device steps
function showDeviceSteps(device) {
  // Remove active class from all tabs
  const tabs = document.querySelectorAll(".device-tab");
  tabs.forEach((tab) => {
    tab.classList.remove("active");
  });

  // Hide all step sections
  const stepSections = document.querySelectorAll(".install-steps");
  stepSections.forEach((section) => {
    section.classList.remove("active");
  });

  // Show selected tab and steps
  const selectedTab = document.querySelector(`[data-device="${device}"]`);
  const selectedSteps = document.getElementById(`${device}Steps`);

  if (selectedTab) {
    selectedTab.classList.add("active");
  }

  if (selectedSteps) {
    selectedSteps.classList.add("active");
  }
}

// Function to detect device and show appropriate steps
function detectAndShowDeviceSteps() {
  let deviceType = "desktop"; // default

  // Detect iOS
  if (
    /iPad|iPhone|iPod/.test(navigator.userAgent) ||
    (navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1)
  ) {
    deviceType = "ios";
  }
  // Detect Android
  else if (/Android/.test(navigator.userAgent)) {
    deviceType = "android";
  }
  // Desktop includes all other devices
  else {
    deviceType = "desktop";
  }

  showDeviceSteps(deviceType);
}

// Initialize device detection when install prompt is shown
function initializeInstallPrompt() {
  // Set up device detection when modal is shown
  const installPrompt = document.getElementById("installPrompt");
  if (installPrompt) {
    // Create observer to detect when modal is shown
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (
          mutation.type === "attributes" &&
          mutation.attributeName === "class"
        ) {
          if (installPrompt.classList.contains("show")) {
            detectAndShowDeviceSteps();
          }
        }
      });
    });

    observer.observe(installPrompt, {
      attributes: true,
      attributeFilter: ["class"],
    });

    // Close modal when clicking on backdrop
    installPrompt.addEventListener("click", (e) => {
      if (e.target === installPrompt) {
        hideInstallPrompt(false);
      }
    });

    // Close modal with Escape key
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && installPrompt.classList.contains("show")) {
        hideInstallPrompt(false);
      }
    });

    // Development helper: press Ctrl+Shift+I to reset install prompt
    document.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.shiftKey && e.key === "I") {
        localStorage.removeItem("hasSeenInstallPrompt");
        console.log("Install prompt reset - refresh page to see it again");
      }
    });
  }
}

// Enhanced UX Features
let isOnline = navigator.onLine;
let keyboardShortcutsVisible = false;

// Initialize enhanced UX features
function initializeEnhancedUX() {
  setupOfflineDetection();
  setupKeyboardShortcuts();
  setupTouchFeedback();
  setupSmoothAnimations();
  setupAccessibilityFeatures();
  setupPerformanceOptimizations();
}

// Offline Detection
function setupOfflineDetection() {
  const offlineIndicator = document.createElement("div");
  offlineIndicator.className = "offline-indicator";
  offlineIndicator.innerHTML =
    '<i class="fas fa-wifi-slash"></i> أنت غير متصل بالإنترنت';
  offlineIndicator.style.display = "none";
  document.body.appendChild(offlineIndicator);

  window.addEventListener("online", () => {
    isOnline = true;
    offlineIndicator.style.display = "none";
    showEnhancedNotification("تم استعادة الاتصال بالإنترنت", "success");
  });

  window.addEventListener("offline", () => {
    isOnline = false;
    offlineIndicator.style.display = "block";
    showEnhancedNotification("فقد الاتصال بالإنترنت", "warning");
  });
}

// Keyboard Shortcuts
function setupKeyboardShortcuts() {
  const shortcutsDiv = document.createElement("div");
  shortcutsDiv.className = "keyboard-shortcuts";
  shortcutsDiv.innerHTML = `
    <h4>اختصارات لوحة المفاتيح</h4>
    <div class="shortcut"><span>الرئيسية</span><span class="key">H</span></div>
    <div class="shortcut"><span>البحث</span><span class="key">/</span></div>
    <div class="shortcut"><span>الوضع المظلم</span><span class="key">D</span></div>
    <div class="shortcut"><span>تكبير الخط</span><span class="key">+</span></div>
    <div class="shortcut"><span>تصغير الخط</span><span class="key">-</span></div>
    <div class="shortcut"><span>الأعلى</span><span class="key">↑</span></div>
    <div class="shortcut"><span>الأسفل</span><span class="key">↓</span></div>
  `;
  shortcutsDiv.style.display = "none";
  document.body.appendChild(shortcutsDiv);

  document.addEventListener("keydown", (e) => {
    // Toggle shortcuts visibility with ?
    if (e.key === "?") {
      keyboardShortcutsVisible = !keyboardShortcutsVisible;
      shortcutsDiv.style.display = keyboardShortcutsVisible ? "block" : "none";
      return;
    }

    // Hide shortcuts on any other key
    if (keyboardShortcutsVisible && e.key !== "?") {
      keyboardShortcutsVisible = false;
      shortcutsDiv.style.display = "none";
    }

    // Navigation shortcuts
    if (!e.ctrlKey && !e.altKey && !e.metaKey) {
      switch (e.key.toLowerCase()) {
        case "h":
          e.preventDefault();
          showHomePage();
          break;
        case "/":
          e.preventDefault();
          const searchInput = document.getElementById("searchInput");
          if (searchInput) {
            searchInput.focus();
            searchInput.select();
          }
          break;
        case "d":
          e.preventDefault();
          toggleTheme();
          break;
        case "+":
        case "=":
          e.preventDefault();
          changeFontSize("increase");
          break;
        case "-":
          e.preventDefault();
          changeFontSize("decrease");
          break;
        case "arrowup":
          e.preventDefault();
          scrollToTop();
          break;
        case "arrowdown":
          e.preventDefault();
          scrollToBottom();
          break;
      }
    }
  });
}

// Touch Feedback
function setupTouchFeedback() {
  // Add haptic feedback for mobile devices
  const addHapticFeedback = (element, type = "light") => {
    element.addEventListener("touchstart", () => {
      if (navigator.vibrate) {
        navigator.vibrate(type === "heavy" ? 50 : 20);
      }
    });
  };

  // Add haptic feedback to interactive elements
  document
    .querySelectorAll(".count-btn, .action-btn, .nav-btn")
    .forEach((btn) => {
      addHapticFeedback(btn, "light");
    });

  document.querySelectorAll(".category-card, .adhkar-card").forEach((card) => {
    addHapticFeedback(card, "light");
  });
}

// Smooth Animations
function setupSmoothAnimations() {
  // Intersection Observer for scroll animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.style.animationDelay = "0s";
        entry.target.style.animationPlayState = "running";
      }
    });
  }, observerOptions);

  // Add animation classes to elements
  document
    .querySelectorAll(".category-card, .adhkar-card, .stat-item")
    .forEach((el, index) => {
      el.style.animation = "slideInUp 0.6s ease forwards";
      el.style.animationDelay = `${index * 0.1}s`;
      el.style.animationPlayState = "paused";
      observer.observe(el);
    });
}

// Accessibility Features
function setupAccessibilityFeatures() {
  // Add ARIA labels and roles
  document.querySelectorAll(".count-btn").forEach((btn) => {
    btn.setAttribute("aria-label", "زيادة العداد");
  });

  document.querySelectorAll(".reset-btn").forEach((btn) => {
    btn.setAttribute("aria-label", "إعادة تعيين العداد");
  });

  // Add skip links for screen readers
  const skipLink = document.createElement("a");
  skipLink.href = "#main";
  skipLink.className = "skip-link";
  skipLink.textContent = "تخطي إلى المحتوى الرئيسي";
  document.body.insertBefore(skipLink, document.body.firstChild);

  // Add skip link styles
  const style = document.createElement("style");
  style.textContent = `
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: #667eea;
      color: white;
      padding: 8px;
      text-decoration: none;
      border-radius: 4px;
      z-index: 1000;
      transition: top 0.3s;
    }
    .skip-link:focus {
      top: 6px;
    }
  `;
  document.head.appendChild(style);
}

// Performance Optimizations
function setupPerformanceOptimizations() {
  // Debounce search input
  const searchInput = document.getElementById("searchInput");
  if (searchInput) {
    let searchTimeout;
    const originalOnInput = searchInput.oninput;
    searchInput.oninput = (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        if (originalOnInput) originalOnInput.call(searchInput, e);
      }, 300);
    };
  }

  // Lazy load images if any
  const images = document.querySelectorAll("img[data-src]");
  if (images.length > 0) {
    const imageObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src;
          img.classList.remove("lazy");
          imageObserver.unobserve(img);
        }
      });
    });

    images.forEach((img) => imageObserver.observe(img));
  }
}

// Enhanced Notification System
function showEnhancedNotification(message, type = "success", duration = 3000) {
  // Remove existing notifications
  document
    .querySelectorAll(".enhanced-notification")
    .forEach((n) => n.remove());

  const notification = document.createElement("div");
  notification.className = `enhanced-notification ${type}`;
  notification.innerHTML = `
    <div class="notification-content">
      <i class="fas ${getNotificationIcon(type)}"></i>
      <span>${message}</span>
    </div>
    <button class="notification-close" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  `;

  // Add notification styles
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${getNotificationColor(type)};
    color: white;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    z-index: 10000;
    max-width: 400px;
    animation: slideInRight 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
  `;

  document.body.appendChild(notification);

  // Auto remove after duration
  if (duration > 0) {
    setTimeout(() => {
      if (notification.parentElement) {
        notification.style.animation = "slideOutRight 0.3s ease";
        setTimeout(() => notification.remove(), 300);
      }
    }, duration);
  }

  // Add slideOutRight animation if not exists
  if (!document.querySelector("#notification-styles")) {
    const style = document.createElement("style");
    style.id = "notification-styles";
    style.textContent = `
      @keyframes slideOutRight {
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
      .enhanced-notification .notification-content {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .enhanced-notification .notification-close {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        padding: 5px;
        opacity: 0.7;
        transition: opacity 0.3s;
      }
      .enhanced-notification .notification-close:hover {
        opacity: 1;
      }
    `;
    document.head.appendChild(style);
  }
}

function getNotificationIcon(type) {
  const icons = {
    success: "fa-check-circle",
    error: "fa-exclamation-circle",
    warning: "fa-exclamation-triangle",
    info: "fa-info-circle",
  };
  return icons[type] || icons.info;
}

function getNotificationColor(type) {
  const colors = {
    success: "#38a169",
    error: "#e53e3e",
    warning: "#d69e2e",
    info: "#667eea",
  };
  return colors[type] || colors.info;
}

// Enhanced Loading States
function showLoadingState(element, text = "جاري التحميل...") {
  if (typeof element === "string") {
    element = document.querySelector(element);
  }

  if (!element) return;

  element.innerHTML = `
    <div style="display: flex; align-items: center; justify-content: center; gap: 10px; padding: 20px;">
      <div class="loading-spinner"></div>
      <span>${text}</span>
    </div>
  `;
  element.style.opacity = "0.7";
}

function hideLoadingState(element) {
  if (typeof element === "string") {
    element = document.querySelector(element);
  }

  if (!element) return;

  element.style.opacity = "1";
}

// Skeleton Loading
function showSkeletonLoading(container, count = 3) {
  if (typeof container === "string") {
    container = document.querySelector(container);
  }

  if (!container) return;

  container.innerHTML = "";
  for (let i = 0; i < count; i++) {
    const skeleton = document.createElement("div");
    skeleton.className = "skeleton-card skeleton";
    skeleton.innerHTML = `
      <div class="skeleton skeleton-text long"></div>
      <div class="skeleton skeleton-text medium"></div>
      <div class="skeleton skeleton-text short"></div>
    `;
    container.appendChild(skeleton);
  }
}

// Enhanced Completion Celebration
function showCompletionCelebration(message = "مبروك! تم إكمال الأذكار") {
  const celebration = document.createElement("div");
  celebration.className = "completion-celebration";
  celebration.innerHTML = `
    <div class="icon">🎉</div>
    <h3>مبروك!</h3>
    <p>${message}</p>
    <button onclick="this.parentElement.remove()" style="
      background: rgba(255,255,255,0.2);
      border: 2px solid white;
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      margin-top: 15px;
    ">حسناً</button>
  `;

  document.body.appendChild(celebration);

  // Play celebration sound if available
  playSound("celebration");

  // Remove after 5 seconds
  setTimeout(() => {
    if (celebration.parentElement) {
      celebration.style.animation = "fadeOut 0.5s ease";
      setTimeout(() => celebration.remove(), 500);
    }
  }, 5000);
}

// Sound Effects (optional)
function playSound(type) {
  // Only play if user has interacted (browsers block autoplay)
  if (!document.hasUserInteracted) return;

  try {
    const audioContext = new (window.AudioContext ||
      window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();

    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);

    switch (type) {
      case "celebration":
        oscillator.frequency.setValueAtTime(523, audioContext.currentTime);
        oscillator.frequency.setValueAtTime(
          659,
          audioContext.currentTime + 0.1
        );
        oscillator.frequency.setValueAtTime(
          784,
          audioContext.currentTime + 0.2
        );
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(
          0.01,
          audioContext.currentTime + 0.5
        );
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.5);
        break;
      case "click":
        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(
          0.01,
          audioContext.currentTime + 0.1
        );
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.1);
        break;
    }
  } catch (e) {
    // Silently fail if Web Audio API is not supported
  }
}

// Utility Functions
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: "smooth" });
}

function scrollToBottom() {
  window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
}

function changeFontSize(direction) {
  const body = document.body;
  const currentSize = parseFloat(getComputedStyle(body).fontSize);
  let newSize;

  if (direction === "increase" && currentSize < 24) {
    newSize = currentSize + 2;
  } else if (direction === "decrease" && currentSize > 14) {
    newSize = currentSize - 2;
  } else {
    return;
  }

  body.style.fontSize = newSize + "px";
  localStorage.setItem("fontSize", newSize);

  showEnhancedNotification(
    direction === "increase" ? "تم تكبير الخط" : "تم تصغير الخط",
    "info",
    2000
  );
}

// Enhanced Search with Highlighting
function highlightSearchResults(text, query) {
  if (!query) return text;

  const regex = new RegExp(`(${query})`, "gi");
  return text.replace(regex, '<span class="search-highlight">$1</span>');
}

// Progress Ring Animation
function animateProgressRing(ringElement, progress) {
  const circle = ringElement.querySelector(".progress-ring-circle-fill");
  if (circle) {
    const circumference = 188.4; // 2 * π * r (r = 30)
    const offset = circumference - (progress / 100) * circumference;
    circle.style.strokeDashoffset = offset;
  }
}

// Enhanced Error Handling
function handleError(error, context = "general") {
  console.error(`Error in ${context}:`, error);

  const errorMessages = {
    network: "خطأ في الشبكة. يرجى التحقق من الاتصال بالإنترنت.",
    storage: "خطأ في حفظ البيانات. قد تفقد بعض التغييرات.",
    general: "حدث خطأ غير متوقع. يرجى إعادة تحميل الصفحة.",
  };

  showEnhancedNotification(
    errorMessages[context] || errorMessages.general,
    "error",
    5000
  );
}

// Initialize enhanced features when DOM is loaded
document.addEventListener("DOMContentLoaded", function () {
  // Mark that user has interacted (for audio)
  document.hasUserInteracted = false;
  document.addEventListener(
    "click",
    () => {
      document.hasUserInteracted = true;
    },
    { once: true }
  );

  // Restore font size preference
  const savedFontSize = localStorage.getItem("fontSize");
  if (savedFontSize) {
    document.body.style.fontSize = savedFontSize + "px";
  }

  // Wait for the original initialization to complete
  setTimeout(() => {
    initializeEnhancedFeatures();
    initializeInstallPrompt();
    initializeEnhancedUX(); // Add enhanced UX features
    // Show install prompt on first visit
    showInstallPrompt();
  }, 500);
});
